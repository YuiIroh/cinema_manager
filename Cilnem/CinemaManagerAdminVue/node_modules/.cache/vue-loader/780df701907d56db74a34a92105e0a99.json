{"remainingRequest":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerAdminVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerAdminVue\\src\\views\\role\\ResourceInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerAdminVue\\src\\views\\role\\ResourceInfo.vue","mtime":1696216054828},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerAdminVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1688267736415},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerAdminVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1688267739465},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerAdminVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1688267736415},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerAdminVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1688267740672}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUmVzb3VyY2VJbmZvIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcXVlcnlJbmZvOiB7CiAgICAgICAgcXVlcnk6ICcnLAogICAgICAgIHBhZ2VOdW06IDEsCiAgICAgICAgcGFnZVNpemU6IDcKICAgICAgfSwKICAgICAgcmVzb3VyY2VMaXN0OiBbXSwKICAgICAgYWxsUmVzb3VyY2VzOiBbXSwKICAgICAgdG90YWw6IDAsCiAgICAgIGFkZERpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICAvL+a3u+WKoOi1hOa6kOeahOihqOWNleaVsOaNrgogICAgICBhZGRGb3JtOiB7CiAgICAgICAgbmFtZTogJycsCiAgICAgICAgcGF0aDogJycsCiAgICAgICAgbGV2ZWw6IDAsCiAgICAgICAgcGFyZW50SWQ6IG51bGwKICAgICAgfSwKICAgICAgLy/pqozor4HooajljZXop4TliJnlr7nosaEKICAgICAgYWRkRm9ybVJ1bGVzOiB7CiAgICAgICAgbmFtZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpei1hOa6kOWQjScsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgXSwKICAgICAgICBwYXRoOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl6LWE5rqQ6Lev5b6EJywgdHJpZ2dlcjogJ2JsdXInfQogICAgICAgIF0KICAgICAgfSwKICAgICAgZWRpdERpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBlZGl0Rm9ybToge30sCiAgICAgIGVkaXRGb3JtUnVsZXM6IHsKICAgICAgICBuYW1lOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl6LWE5rqQ5ZCNJywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICBdLAogICAgICAgIHBhdGg6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXotYTmupDot6/lvoQnLCB0cmlnZ2VyOiAnYmx1cid9CiAgICAgICAgXQogICAgICB9LAogICAgICBtdWx0aXBsZVNlbGVjdGlvbjogW10KICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldFJlc291cmNlTGlzdCgpCiAgICB0aGlzLmdldEFsbFJlc291cmNlKCkKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGdldFJlc291cmNlTGlzdCgpewogICAgICBjb25zdCB7ZGF0YSA6IHJlc30gPSBhd2FpdCBheGlvcy5nZXQoJ3N5c1Jlc291cmNlJywge3BhcmFtczogdGhpcy5xdWVyeUluZm99KQogICAgICB0aGlzLnJlc291cmNlTGlzdCA9IHJlcy5kYXRhOwogICAgICB0aGlzLnRvdGFsID0gcmVzLnRvdGFsCiAgICAgIHRoaXMucXVlcnlJbmZvLnBhZ2VOdW0gPSByZXMucGFnZU51bQogICAgICB0aGlzLnF1ZXJ5SW5mby5wYWdlU2l6ZSA9IHJlcy5wYWdlU2l6ZQogICAgfSwKICAgIGFzeW5jIGdldEFsbFJlc291cmNlKCl7CiAgICAgIGNvbnN0IHtkYXRhIDogcmVzfSA9IGF3YWl0IGF4aW9zLmdldCgnc3lzUmVzb3VyY2UnKQogICAgICB0aGlzLmFsbFJlc291cmNlcyA9IHJlcy5kYXRhOwogICAgfSwKICAgIGhhbmRsZVNpemVDaGFuZ2UobmV3U2l6ZSkgewogICAgICB0aGlzLnF1ZXJ5SW5mby5wYWdlU2l6ZSA9IG5ld1NpemUKICAgICAgdGhpcy5nZXRSZXNvdXJjZUxpc3QoKQogICAgfSwKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UobmV3UGFnZSkgewogICAgICB0aGlzLnF1ZXJ5SW5mby5wYWdlTnVtID0gbmV3UGFnZQogICAgICB0aGlzLmdldFJlc291cmNlTGlzdCgpCiAgICB9LAogICAgLy8g55uR5ZCs5re75Yqg5a+56K+d5qGG55qE5YWz6Zet5LqL5Lu2CiAgICBhZGREaWFsb2dDbG9zZWQoKXsKICAgICAgdGhpcy4kcmVmcy5hZGRGb3JtUmVmLnJlc2V0RmllbGRzKCkKICAgIH0sCiAgICAvLyDnm5HlkKzmt7vliqDmjInpkq4KICAgIGFkZFJlc291cmNlKCl7CiAgICAgIGNvbnN0IF90aGlzID0gdGhpczsKICAgICAgdGhpcy4kcmVmcy5hZGRGb3JtUmVmLnZhbGlkYXRlKGFzeW5jIHZhbGlkID0+IHsKICAgICAgICBpZiAoIXZhbGlkKSByZXR1cm4KICAgICAgICAvL+mihOagoemqjOaIkOWKn++8jOWPkee9kee7nOivt+axggogICAgICAgIGlmKF90aGlzLmFkZEZvcm0ucGFyZW50SWQgPT09IG51bGwpIF90aGlzLmFkZEZvcm0ucGFyZW50SWQgPSAwCgogICAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMucG9zdFsnQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbicKICAgICAgICBjb25zdCB7IGRhdGEgOiByZXN9ID0gYXdhaXQgYXhpb3MucG9zdCgnc3lzUmVzb3VyY2UnLCBKU09OLnN0cmluZ2lmeShfdGhpcy5hZGRGb3JtKSkKICAgICAgICBpZihyZXMuY29kZSAhPT0gMjAwKSByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubXNnKQogICAgICAgIC8v6ZqQ6JeP5re75Yqg5a+56K+d5qGGCiAgICAgICAgdGhpcy5hZGREaWFsb2dWaXNpYmxlID0gZmFsc2UKICAgICAgICAvL+mHjeaWsOWKoOi9veWIl+ihqAogICAgICAgIGF3YWl0IHRoaXMuZ2V0UmVzb3VyY2VMaXN0KCkKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+a3u+WKoOi1hOa6kOS/oeaBr+aIkOWKn++8gScpCiAgICAgIH0pCiAgICB9LAogICAgLy8g5pi+56S65L+u5pS55a+56K+d5qGG77yM5Zue5pi+5pWw5o2uCiAgICBhc3luYyBzaG93RWRpdERpYWxvZyhpZCl7CiAgICAgIGNvbnN0IF90aGlzID0gdGhpcwogICAgICBhd2FpdCBheGlvcy5nZXQoJ3N5c1Jlc291cmNlLycgKyBpZCApLnRoZW4ocmVzcCA9PiB7CiAgICAgICAgY29uc29sZS5sb2cocmVzcCkKICAgICAgICBfdGhpcy5lZGl0Rm9ybSA9IHJlc3AuZGF0YS5kYXRhCiAgICAgIH0pCiAgICAgIGlmKHRoaXMuZWRpdEZvcm0ucGFyZW50SWQgPT09IDApIHRoaXMuZWRpdEZvcm0ucGFyZW50SWQgPSAnJwogICAgICB0aGlzLmVkaXREaWFsb2dWaXNpYmxlID0gdHJ1ZQogICAgfSwKICAgIC8vIOebkeWQrOS/ruaUueWvueivneahhueahOWFs+mXreS6i+S7tgogICAgZWRpdERpYWxvZ0Nsb3NlZCgpewogICAgICB0aGlzLiRyZWZzLmVkaXRGb3JtUmVmLnJlc2V0RmllbGRzKCkKICAgIH0sCiAgICAvLyDkv67mlLnlvbHljoXliIbnsbvkv6Hmga/lubbmj5DkuqQKICAgIGVkaXRSZXNvdXJjZSgpewogICAgICB0aGlzLiRyZWZzLmVkaXRGb3JtUmVmLnZhbGlkYXRlKGFzeW5jIHZhbGlkID0+IHsKICAgICAgICBjb25zdCBfdGhpcyA9IHRoaXMKICAgICAgICBpZiAoIXZhbGlkKSByZXR1cm4KICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmVkaXRGb3JtLnBhcmVudElkKQogICAgICAgIGlmKHRoaXMuZWRpdEZvcm0ucGFyZW50SWQgPT09ICcnKSB0aGlzLmVkaXRGb3JtLnBhcmVudElkID0gMAogICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZWRpdEZvcm0ucGFyZW50SWQpCiAgICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5wdXRbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgY29uc3Qge2RhdGEgOiByZXN9ID0gYXdhaXQgYXhpb3MucHV0KCdzeXNSZXNvdXJjZS8nLCBKU09OLnN0cmluZ2lmeShfdGhpcy5lZGl0Rm9ybSkpCiAgICAgICAgaWYocmVzLmNvZGUgIT09IDIwMCkgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1zZykKCiAgICAgICAgdGhpcy5lZGl0RGlhbG9nVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgYXdhaXQgdGhpcy5nZXRSZXNvdXJjZUxpc3QoKQogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5L+u5pS56LWE5rqQ5L+h5oGv5oiQ5Yqf77yBJykKICAgICAgfSkKICAgIH0sCiAgICAvLyDnm5HlkKzlpJrpgInmoYblj5jljJYKICAgIGhhbmRsZVNlbGVjdGlvbkNoYW5nZSh2YWwpewogICAgICB0aGlzLm11bHRpcGxlU2VsZWN0aW9uID0gdmFsCiAgICB9LAogICAgYXN5bmMgbXVsdGlwbGVEZWxldGUoKXsKICAgICAgY29uc3QgX3RoaXMgPSB0aGlzCiAgICAgIC8v6K+i6Zeu55So5oi35piv5ZCm56Gu6K6k5Yig6ZmkCiAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCB0aGlzLiRjb25maXJtKCfmraTmk43kvZzlsIbmsLjkuYXliKDpmaTov5nkupvmnaHnm64sIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkuY2F0Y2goZXJyID0+IGVycikKCiAgICAgIC8vIOeUqOaIt+ehruiupOWIoOmZpCwgcmVzcOS4uuWtl+espuS4siJjb25maXJtIgogICAgICAvLyDnlKjmiLflj5bmtojliKDpmaTvvIxyZXNw5Li65a2X56ym5LiyImNhbmNlbCIKICAgICAgaWYgKHJlc3AgPT09ICdjYW5jZWwnKXsKICAgICAgICByZXR1cm4gX3RoaXMuJG1lc3NhZ2UuaW5mbygn5bey5Y+W5raI5Yig6ZmkJykKICAgICAgfQoKICAgICAgbGV0IGlkcyA9IFtdCiAgICAgIHRoaXMubXVsdGlwbGVTZWxlY3Rpb24uZm9yRWFjaChkYXRhID0+IHsKICAgICAgICBpZHMucHVzaChkYXRhLmlkKQogICAgICB9KQogICAgICBhd2FpdCBheGlvcy5kZWxldGUoJ3N5c1Jlc291cmNlLycgKyBpZHMpLnRoZW4ocmVzcCA9PiB7CiAgICAgICAgaWYgKHJlc3AuZGF0YS5jb2RlICE9PSAyMDApewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmibnph4/liKDpmaTotYTmupDkv6Hmga/lpLHotKXvvIEnKQogICAgICAgIH0KICAgICAgfSkKICAgICAgYXdhaXQgdGhpcy5nZXRSZXNvdXJjZUxpc3QoKQogICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+aJuemHj+WIoOmZpOi1hOa6kOS/oeaBr+aIkOWKn++8gScpCiAgICB9LAogICAgLy/moLnmja5pZOWIoOmZpOWvueW6lOeahOi1hOa6kOS/oeaBrwogICAgYXN5bmMgZGVsZXRlUmVzb3VyY2VCeUlkKGlkKXsKICAgICAgY29uc3QgX3RoaXMgPSB0aGlzCiAgICAgIC8v6K+i6Zeu55So5oi35piv5ZCm56Gu6K6k5Yig6ZmkCiAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCB0aGlzLiRjb25maXJtKCfmraTmk43kvZzlsIbmsLjkuYXliKDpmaTor6XmnaHnm64sIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkuY2F0Y2goZXJyID0+IGVycikKCiAgICAgIC8vIOeUqOaIt+ehruiupOWIoOmZpCwgcmVzcOS4uuWtl+espuS4siJjb25maXJtIgogICAgICAvLyDnlKjmiLflj5bmtojliKDpmaTvvIxyZXNw5Li65a2X56ym5LiyImNhbmNlbCIKICAgICAgY29uc29sZS5sb2cocmVzcCkKICAgICAgaWYgKHJlc3AgPT09ICdjYW5jZWwnKXsKICAgICAgICByZXR1cm4gX3RoaXMuJG1lc3NhZ2UuaW5mbygn5bey5Y+W5raI5Yig6ZmkJykKICAgICAgfQoKICAgICAgYXdhaXQgYXhpb3MuZGVsZXRlKCdzeXNSZXNvdXJjZS8nICsgaWQpLnRoZW4ocmVzcCA9PiB7CiAgICAgICAgaWYgKHJlc3AuZGF0YS5jb2RlICE9PSAyMDApewogICAgICAgICAgX3RoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5Yig6Zmk6LWE5rqQ5L+h5oGv5aSx6LSl77yBJykKICAgICAgICB9CiAgICAgIH0pCiAgICAgIGF3YWl0IHRoaXMuZ2V0UmVzb3VyY2VMaXN0KCkKICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfliKDpmaTotYTmupDkv6Hmga/miJDlip/vvIEnKQogICAgfQogIH0KfQo="},{"version":3,"sources":["ResourceInfo.vue"],"names":[],"mappings":";AAqIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ResourceInfo.vue","sourceRoot":"src/views/role","sourcesContent":["<template>\n  <div>\n    <!--面包屑导航区域-->\n    <div class=\"board\">\n      <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n        <el-breadcrumb-item :to=\"{ path: '/welcome' }\">首页</el-breadcrumb-item>\n        <el-breadcrumb-item>权限管理</el-breadcrumb-item>\n        <el-breadcrumb-item>资源信息管理</el-breadcrumb-item>\n      </el-breadcrumb>\n    </div>\n\n\n    <!-- 卡片视图 -->\n    <el-card>\n      <el-row :gutter=\"24\">\n        <el-col :span=\"24\">\n          <el-button type=\"primary\" @click=\"addDialogVisible = true\" style=\"font-size: 22px;\">\n            <i class=\"iconfont icon-r-add\" style=\"font-size: 24px;\"></i> 添加资源\n          </el-button>\n          <el-button type=\"danger\" @click=\"multipleDelete\" style=\"font-size: 22px;\">\n            <i class=\"iconfont icon-r-delete\" style=\"font-size: 24px;\"></i> 批量删除\n          </el-button>\n        </el-col>\n      </el-row>\n\n      <el-table :data=\"resourceList\" border stripe @selection-change=\"handleSelectionChange\">\n        <el-table-column type=\"selection\" width=\"55\"></el-table-column>\n        <el-table-column prop=\"id\" label=\"资源编号\" width=\"145\"></el-table-column>\n        <el-table-column prop=\"name\" label=\"资源名称\" width=\"180\"></el-table-column>\n        <el-table-column prop=\"path\" label=\"资源路径\" width=\"180\"></el-table-column>\n        <el-table-column prop=\"level\" label=\"权限等级\" width=\"180\">\n          <template slot-scope=\"scope\">\n            <el-tag type=\"danger\" v-if=\"scope.row.level === 1\">一级</el-tag>\n            <el-tag type=\"warning\" v-else-if=\"scope.row.level === 2\">二级</el-tag>\n            <el-tag v-else>三级</el-tag>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"parent.name\" label=\"父资源名称\" width=\"180\"></el-table-column>\n        <el-table-column label=\"操作\" width=\"200\" fixed=\"right\">\n          <template slot-scope=\"scope\">\n            <el-tooltip effect=\"dark\" content=\"修改资源信息\" placement=\"top\" :enterable=\"false\" :open-delay=\"500\">\n              <el-button type=\"primary\" @click=\"showEditDialog(scope.row.id)\">\n                <i class=\"iconfont icon-r-edit\" style=\"font-size: 22px;\"></i>\n              </el-button>\n            </el-tooltip>\n            <el-tooltip effect=\"dark\" content=\"删除资源\" placement=\"top\" :enterable=\"false\" :open-delay=\"500\">\n              <el-button type=\"danger\" @click=\"deleteResourceById(scope.row.id)\">\n                <i class=\"iconfont icon-r-delete\" style=\"font-size: 24px;\"></i>\n              </el-button>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <!--分页区域-->\n      <el-pagination\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n          :current-page=\"queryInfo.pageNum\"\n          :page-sizes=\"[5, 7, 9]\"\n          :page-size=\"queryInfo.pageSize\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"total\">\n      </el-pagination>\n\n    </el-card>\n\n    <!--添加资源对话框-->\n    <el-dialog title=\"添加资源\" :visible.sync=\"addDialogVisible\" width=\"50%\" @close=\"addDialogClosed\">\n      <!--内容主题区-->\n      <el-form :model=\"addForm\" :rules=\"addFormRules\" ref=\"addFormRef\" label-width=\"100px\">\n        <!--prop：在addFormRules中定义校验规则， v-model：双向绑定数据-->\n\n        <el-form-item label=\"资源编号\" prop=\"id\">\n          <el-input v-model=\"addForm.id\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"资源名称\" prop=\"name\">\n          <el-input v-model=\"addForm.name\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"资源路径\" prop=\"path\">\n          <el-input v-model=\"addForm.path\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"父资源名称\" prop=\"parentId\">\n          <el-select v-model=\"addForm.parentId\" placeholder=\"请选择父资源\" clearable >\n            <el-option\n                v-for=\"item in allResources\"\n                :key=\"item.id\"\n                :label=\"item.name\"\n                :value=\"item.id\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n      </el-form>\n      <!--底部区域-->\n      <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"addDialogVisible = false\" style=\"font-size: 18px;\"><i class=\"iconfont icon-r-left\" style=\"font-size: 24px;\"></i> 取 消</el-button>\n      <el-button type=\"primary\" @click=\"addResource\" style=\"font-size: 18px;\"><i class=\"iconfont icon-r-yes\" style=\"font-size: 24px;\"></i> 确 定</el-button>\n      </span>\n    </el-dialog>\n\n    <!--修改影厅对话框-->\n    <el-dialog title=\"修改资源\" :visible.sync=\"editDialogVisible\" width=\"50%\" @close=\"editDialogClosed\">\n      <el-form :model=\"editForm\" :rules=\"editFormRules\" ref=\"editFormRef\" label-width=\"100px\">\n        <el-form-item label=\"资源编号\" prop=\"id\">\n          <el-input v-model=\"editForm.id\" disabled></el-input>\n        </el-form-item>\n        <el-form-item label=\"资源名称\" prop=\"name\">\n          <el-input v-model=\"editForm.name\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"资源路径\" prop=\"path\">\n          <el-input v-model=\"editForm.path\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"父资源名称\" prop=\"parentId\">\n          <el-select v-model=\"editForm.parentId\" placeholder=\"请选择父资源\" clearable >\n            <el-option\n                v-for=\"item in allResources\"\n                :key=\"item.id\"\n                :label=\"item.name\"\n                :value=\"item.id\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"editDialogVisible = false\" style=\"font-size: 18px;\"><i class=\"iconfont icon-r-left\" style=\"font-size: 24px;\"></i> 取 消</el-button>\n        <el-button type=\"primary\" @click=\"editResource\" style=\"font-size: 18px;\"><i class=\"iconfont icon-r-yes\" style=\"font-size: 24px;\"></i> 确 定</el-button>\n      </span>\n    </el-dialog>\n\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"ResourceInfo\",\n  data() {\n    return {\n      queryInfo: {\n        query: '',\n        pageNum: 1,\n        pageSize: 7\n      },\n      resourceList: [],\n      allResources: [],\n      total: 0,\n      addDialogVisible: false,\n      //添加资源的表单数据\n      addForm: {\n        name: '',\n        path: '',\n        level: 0,\n        parentId: null\n      },\n      //验证表单规则对象\n      addFormRules: {\n        name: [\n          { required: true, message: '请输入资源名', trigger: 'blur' }\n        ],\n        path: [\n          { required: true, message: '请输入资源路径', trigger: 'blur'}\n        ]\n      },\n      editDialogVisible: false,\n      editForm: {},\n      editFormRules: {\n        name: [\n          { required: true, message: '请输入资源名', trigger: 'blur' }\n        ],\n        path: [\n          { required: true, message: '请输入资源路径', trigger: 'blur'}\n        ]\n      },\n      multipleSelection: []\n    }\n  },\n  created() {\n    this.getResourceList()\n    this.getAllResource()\n  },\n  methods: {\n    async getResourceList(){\n      const {data : res} = await axios.get('sysResource', {params: this.queryInfo})\n      this.resourceList = res.data;\n      this.total = res.total\n      this.queryInfo.pageNum = res.pageNum\n      this.queryInfo.pageSize = res.pageSize\n    },\n    async getAllResource(){\n      const {data : res} = await axios.get('sysResource')\n      this.allResources = res.data;\n    },\n    handleSizeChange(newSize) {\n      this.queryInfo.pageSize = newSize\n      this.getResourceList()\n    },\n    handleCurrentChange(newPage) {\n      this.queryInfo.pageNum = newPage\n      this.getResourceList()\n    },\n    // 监听添加对话框的关闭事件\n    addDialogClosed(){\n      this.$refs.addFormRef.resetFields()\n    },\n    // 监听添加按钮\n    addResource(){\n      const _this = this;\n      this.$refs.addFormRef.validate(async valid => {\n        if (!valid) return\n        //预校验成功，发网络请求\n        if(_this.addForm.parentId === null) _this.addForm.parentId = 0\n\n        axios.defaults.headers.post['Content-Type'] = 'application/json'\n        const { data : res} = await axios.post('sysResource', JSON.stringify(_this.addForm))\n        if(res.code !== 200) return this.$message.error(res.msg)\n        //隐藏添加对话框\n        this.addDialogVisible = false\n        //重新加载列表\n        await this.getResourceList()\n        this.$message.success('添加资源信息成功！')\n      })\n    },\n    // 显示修改对话框，回显数据\n    async showEditDialog(id){\n      const _this = this\n      await axios.get('sysResource/' + id ).then(resp => {\n        console.log(resp)\n        _this.editForm = resp.data.data\n      })\n      if(this.editForm.parentId === 0) this.editForm.parentId = ''\n      this.editDialogVisible = true\n    },\n    // 监听修改对话框的关闭事件\n    editDialogClosed(){\n      this.$refs.editFormRef.resetFields()\n    },\n    // 修改影厅分类信息并提交\n    editResource(){\n      this.$refs.editFormRef.validate(async valid => {\n        const _this = this\n        if (!valid) return\n        console.log(this.editForm.parentId)\n        if(this.editForm.parentId === '') this.editForm.parentId = 0\n        console.log(this.editForm.parentId)\n        axios.defaults.headers.put['Content-Type'] = 'application/json'\n        const {data : res} = await axios.put('sysResource/', JSON.stringify(_this.editForm))\n        if(res.code !== 200) return this.$message.error(res.msg)\n\n        this.editDialogVisible = false\n        await this.getResourceList()\n        this.$message.success('修改资源信息成功！')\n      })\n    },\n    // 监听多选框变化\n    handleSelectionChange(val){\n      this.multipleSelection = val\n    },\n    async multipleDelete(){\n      const _this = this\n      //询问用户是否确认删除\n      const resp = await this.$confirm('此操作将永久删除这些条目, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).catch(err => err)\n\n      // 用户确认删除, resp为字符串\"confirm\"\n      // 用户取消删除，resp为字符串\"cancel\"\n      if (resp === 'cancel'){\n        return _this.$message.info('已取消删除')\n      }\n\n      let ids = []\n      this.multipleSelection.forEach(data => {\n        ids.push(data.id)\n      })\n      await axios.delete('sysResource/' + ids).then(resp => {\n        if (resp.data.code !== 200){\n          this.$message.success('批量删除资源信息失败！')\n        }\n      })\n      await this.getResourceList()\n      this.$message.success('批量删除资源信息成功！')\n    },\n    //根据id删除对应的资源信息\n    async deleteResourceById(id){\n      const _this = this\n      //询问用户是否确认删除\n      const resp = await this.$confirm('此操作将永久删除该条目, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).catch(err => err)\n\n      // 用户确认删除, resp为字符串\"confirm\"\n      // 用户取消删除，resp为字符串\"cancel\"\n      console.log(resp)\n      if (resp === 'cancel'){\n        return _this.$message.info('已取消删除')\n      }\n\n      await axios.delete('sysResource/' + id).then(resp => {\n        if (resp.data.code !== 200){\n          _this.$message.success('删除资源信息失败！')\n        }\n      })\n      await this.getResourceList()\n      this.$message.success('删除资源信息成功！')\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}
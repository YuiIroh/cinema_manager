{"remainingRequest":"C:\\Users\\LZL\\Desktop\\CinemaManagerAdminVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\LZL\\Desktop\\CinemaManagerAdminVue\\src\\views\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\LZL\\Desktop\\CinemaManagerAdminVue\\src\\views\\Login.vue","mtime":1697027703513},{"path":"C:\\Users\\LZL\\Desktop\\CinemaManagerAdminVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\LZL\\Desktop\\CinemaManagerAdminVue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\LZL\\Desktop\\CinemaManagerAdminVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\LZL\\Desktop\\CinemaManagerAdminVue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJMb2dpbiIsCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIC8v55m75b2V6KGo5Y2V5pWw5o2u5a+56LGhCiAgICAgICAgICAgIGxvZ2luRm9ybTogewogICAgICAgICAgICAgICAgdXNlck5hbWU6ICIiLAogICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICIiLAogICAgICAgICAgICB9LAogICAgICAgICAgICAvL+ihqOWNlemqjOivgeinhOWImQogICAgICAgICAgICBsb2dpbkZvcm1SdWxlczogewogICAgICAgICAgICAgICAgLy/pqozor4HnlKjmiLflkI0KICAgICAgICAgICAgICAgIHVzZXJOYW1lOiBbCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIuivt+i+k+WFpeeUqOaIt+WQjeensCIsCiAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIiwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgbWluOiAyLAogICAgICAgICAgICAgICAgICAgICAgICBtYXg6IDIwLAogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAi6ZW/5bqm5ZyoMuWIsDIw5Liq5a2X56ym5LmL6Ze0IiwKICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogImJsdXIiLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgLy/pqozor4Hlr4bnoIEKICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBbCiAgICAgICAgICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpeWvhueggSIsIHRyaWdnZXI6ICJibHVyIiB9LAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgbWluOiA2LAogICAgICAgICAgICAgICAgICAgICAgICBtYXg6IDE2LAogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAi6ZW/5bqm5ZyoNuWIsDE25Liq5a2X56ym5LmL6Ze0IiwKICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogImJsdXIiLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICB9LAogICAgICAgIH07CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIHN1Y2Nlc3MocGFyYW1zKSB7CiAgICAgICAgICAgIHRoaXMubG9naW4oKTsKICAgICAgICB9LAogICAgICAgIGxvZ2luKCkgewogICAgICAgICAgICB0aGlzLiRyZWZzLmxvZ2luRm9ybVJlZi52YWxpZGF0ZShhc3luYyAodmFsaWQpID0+IHsKICAgICAgICAgICAgICAgIGlmICghdmFsaWQpIHJldHVybjsKICAgICAgICAgICAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMucG9zdFsiQ29udGVudC1UeXBlIl0gPQogICAgICAgICAgICAgICAgICAgICJhcHBsaWNhdGlvbi9qc29uIjsKICAgICAgICAgICAgICAgIGNvbnN0IHJlc0RhdGEgPSBhd2FpdCBheGlvcwogICAgICAgICAgICAgICAgICAgIC5wb3N0KCJzeXNVc2VyL2xvZ2luIiwgSlNPTi5zdHJpbmdpZnkodGhpcy5sb2dpbkZvcm0pKQogICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5yZXNwb25zZSA9PSB1bmRlZmluZWQgfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucmVzcG9uc2UuZGF0YSA9PSB1bmRlZmluZWQKICAgICAgICAgICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA1MDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZS5yZXNwb25zZS5kYXRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDUwMDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgaWYgKHJlc0RhdGEgPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIk5ldHdvcmsgRXJyb3IiLAogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogNTAwMCwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gcmVzRGF0YTsKICAgICAgICAgICAgICAgIGlmIChyZXMuY29kZSAhPT0gMjAwKSByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICAgICAgICAgIC8v5o6n5Yi255m75b2V5p2D6ZmQCiAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgcmVzLmRhdGEuc3lzVXNlci5zeXNSb2xlLmNoaWxkcmVuID09PSBudWxsIHx8CiAgICAgICAgICAgICAgICAgICAgcmVzLmRhdGEuc3lzVXNlci5zeXNSb2xlLmNoaWxkcmVuWzBdID09PSBudWxsCiAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKAogICAgICAgICAgICAgICAgICAgICAgICAi5oqx5q2J77yM5oKo5rKh5pyJ5p2D6ZmQ55m75b2V77yM6K+36IGU57O7566h55CG5ZGY6I635Y+W5p2D6ZmQIgogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLnmbvlvZXmiJDlip8iKTsKICAgICAgICAgICAgICAgIC8v5L+d5a2YdG9rZW4KICAgICAgICAgICAgICAgIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJ0b2tlbiIsIHJlcy5kYXRhLnRva2VuKTsKICAgICAgICAgICAgICAgIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKAogICAgICAgICAgICAgICAgICAgICJsb2dpblVzZXIiLAogICAgICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgICAgICAgc3lzVXNlcjogcmVzLmRhdGEuc3lzVXNlciwKICAgICAgICAgICAgICAgICAgICAgICAgY2luZW1hSWQ6IHJlcy5kYXRhLmNpbmVtYUlkLAogICAgICAgICAgICAgICAgICAgICAgICBjaW5lbWFOYW1lOiByZXMuZGF0YS5jaW5lbWFOYW1lLAogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgLy8gd2luZG93LnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oImJ0blBlcm1pc3Npb24iLCByZXMuZGF0YS5zeXNVc2VyLnN5c1JvbGUucm9sZUlkID09PSAxID8gImFkbWluIiA6ICJub3JtYWwiKQogICAgICAgICAgICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oCiAgICAgICAgICAgICAgICAgICAgImJ0blBlcm1pc3Npb24iLAogICAgICAgICAgICAgICAgICAgIHJlcy5kYXRhLnN5c1VzZXIuc3lzUm9sZS5yb2xlSWQgPT09IDEgPyAiYWRtaW4iIDogImFkbWluIgogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIC8v5a+86Iiq6Lez6L2s5Yiw6aaW6aG1CiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiRyb3V0ZXIucHVzaCgiL3dlbGNvbWUiKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgIH0sCn07Cg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";AAwEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class=\"login_container\">\n        <div class=\"login_box\">\n            <div class=\"title_box\">\n                <p>\n                    <i class=\"iconfont icon-r-setting\" style=\"font-size: 36px\">\n                    </i>\n                    影院后台管理\n                </p>\n            </div>\n            <!-- 登录表单区域 -->\n            <el-form\n                class=\"login_form\"\n                :model=\"loginForm\"\n                :rules=\"loginFormRules\"\n                ref=\"loginFormRef\"\n            >\n                <!-- 用户名 -->\n                <el-form-item prop=\"userName\">\n                    <el-col :span=\"2\">\n                        <i\n                            class=\"iconfont icon-r-user1\"\n                            style=\"font-size: 28px; color: grey\"\n                        ></i>\n                    </el-col>\n                    <el-col :span=\"22\">\n                        <el-input\n                            v-model=\"loginForm.userName\"\n                            placeholder=\"请输入用户名\"\n                            clearable\n                        >\n                        </el-input>\n                    </el-col>\n                </el-form-item>\n                <!-- 密码 -->\n                <el-form-item prop=\"password\">\n                    <el-col :span=\"2\">\n                        <i\n                            class=\"iconfont icon-r-lock\"\n                            style=\"font-size: 28px; color: grey\"\n                        ></i>\n                    </el-col>\n                    <el-col :span=\"22\">\n                        <el-input\n                            v-model=\"loginForm.password\"\n                            type=\"password\"\n                            placeholder=\"请输入密码\"\n                            show-password\n                        ></el-input>\n                    </el-col>\n                </el-form-item>\n                <!-- 按扭区域 -->\n                <el-form-item class=\"btns\">\n                    <el-button\n                        style=\"font-size: 22px\"\n                        :round=\"true\"\n                        type=\"primary\"\n                        @click=\"login\"\n                    >\n                        <i\n                            class=\"iconfont icon-r-yes\"\n                            style=\"font-size: 22px\"\n                        ></i>\n                        登录\n                    </el-button>\n                </el-form-item>\n            </el-form>\n        </div>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: \"Login\",\n    data() {\n        return {\n            //登录表单数据对象\n            loginForm: {\n                userName: \"\",\n                password: \"\",\n            },\n            //表单验证规则\n            loginFormRules: {\n                //验证用户名\n                userName: [\n                    {\n                        required: true,\n                        message: \"请输入用户名称\",\n                        trigger: \"blur\",\n                    },\n                    {\n                        min: 2,\n                        max: 20,\n                        message: \"长度在2到20个字符之间\",\n                        trigger: \"blur\",\n                    },\n                ],\n                //验证密码\n                password: [\n                    { required: true, message: \"请输入密码\", trigger: \"blur\" },\n                    {\n                        min: 6,\n                        max: 16,\n                        message: \"长度在6到16个字符之间\",\n                        trigger: \"blur\",\n                    },\n                ],\n            },\n        };\n    },\n    methods: {\n        success(params) {\n            this.login();\n        },\n        login() {\n            this.$refs.loginFormRef.validate(async (valid) => {\n                if (!valid) return;\n                axios.defaults.headers.post[\"Content-Type\"] =\n                    \"application/json\";\n                const resData = await axios\n                    .post(\"sysUser/login\", JSON.stringify(this.loginForm))\n                    .catch((e) => {\n                        console.log(e);\n                        if (\n                            e.response == undefined ||\n                            e.response.data == undefined\n                        ) {\n                            this.$message({\n                                showClose: true,\n                                message: e,\n                                type: \"error\",\n                                duration: 5000,\n                            });\n                        } else {\n                            this.$message({\n                                showClose: true,\n                                message: e.response.data,\n                                type: \"error\",\n                                duration: 5000,\n                            });\n                        }\n                    });\n                if (resData == undefined) {\n                    this.$message({\n                        showClose: true,\n                        message: \"Network Error\",\n                        type: \"error\",\n                        duration: 5000,\n                    });\n                    return;\n                }\n                const { data: res } = resData;\n                if (res.code !== 200) return this.$message.error(res.msg);\n                //控制登录权限\n                if (\n                    res.data.sysUser.sysRole.children === null ||\n                    res.data.sysUser.sysRole.children[0] === null\n                ) {\n                    this.$message.error(\n                        \"抱歉，您没有权限登录，请联系管理员获取权限\"\n                    );\n                    return;\n                }\n                this.$message.success(\"登录成功\");\n                //保存token\n                window.sessionStorage.setItem(\"token\", res.data.token);\n                window.sessionStorage.setItem(\n                    \"loginUser\",\n                    JSON.stringify({\n                        sysUser: res.data.sysUser,\n                        cinemaId: res.data.cinemaId,\n                        cinemaName: res.data.cinemaName,\n                    })\n                );\n                // window.sessionStorage.setItem(\"btnPermission\", res.data.sysUser.sysRole.roleId === 1 ? \"admin\" : \"normal\")\n                window.sessionStorage.setItem(\n                    \"btnPermission\",\n                    res.data.sysUser.sysRole.roleId === 1 ? \"admin\" : \"admin\"\n                );\n                //导航跳转到首页\n                await this.$router.push(\"/welcome\");\n            });\n        },\n    },\n};\n</script>\n\n<style scoped>\n.login_container {\n    height: 100%;\n    background: url(\"../assets/login-background.jpg\");\n    background-size: cover;\n}\n\n.login_box {\n    opacity: 0.8;\n    width: 450px;\n    height: 300px;\n    background-color: #fff;\n    border-radius: 3px;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    border: 1px solid grey;\n}\n\n.avatar_box {\n    height: 130px;\n    width: 130px;\n    border: 1px solid #eee;\n    border-radius: 50%;\n    padding: 10px;\n    box-shadow: 0 0 10px #ddd;\n    position: absolute;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    background-color: #fff;\n}\n\n.avatar_box > img {\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: #eee;\n}\n\n.title_box {\n    text-align: center;\n    font-size: 200%;\n}\n\n.login_form {\n    position: absolute;\n    bottom: 0;\n    width: 100%;\n    padding: 0 20px;\n    box-sizing: border-box;\n}\n\n.btns {\n    display: flex;\n    justify-content: center;\n}\n</style>\n"]}]}
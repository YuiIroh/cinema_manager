{"remainingRequest":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerAdminVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerAdminVue\\src\\views\\hall\\SessionInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerAdminVue\\src\\views\\hall\\SessionInfo.vue","mtime":1696216054825},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerAdminVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1688267736415},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerAdminVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1688267739465},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerAdminVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1688267736415},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerAdminVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1688267740672}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBnbG9iYWwgZnJvbSAiQC9hc3NldHMvY3NzL2dsb2JhbC5jc3MiCmltcG9ydCBlY2hhcnRzIGZyb20gJ2VjaGFydHMnCmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkhhbGxJbmZvIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcXVlcnlJbmZvOiB7CiAgICAgICAgaGFsbElkOiAnJywKICAgICAgICBtb3ZpZUlkOiAnJywKICAgICAgICBzZXNzaW9uRGF0ZTogJycsCiAgICAgICAgcGFnZU51bTogMSwKICAgICAgICBwYWdlU2l6ZTogNwogICAgICB9LAogICAgICBzZXNzaW9uTGlzdDogW10sCiAgICAgIHRvdGFsOiAwLAogICAgICAvL+aOp+WItuWvueivneahhueahOaYvuekuuS4jumakOiXjwogICAgICBhZGREaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgLy/mt7vliqDlvbHljoXnmoTooajljZXmlbDmja4KICAgICAgYWRkRm9ybTogewogICAgICAgIGhhbGxJZDogJycsCiAgICAgICAgbGFuZ3VhZ2VWZXJzaW9uOiAnJywKICAgICAgICBtb3ZpZUlkOiAnJywKICAgICAgICBwbGF5VGltZTogJycsCiAgICAgICAgZW5kVGltZTogJycsCiAgICAgICAgZGVhZGxpbmU6ICcnLAogICAgICAgIHNlc3Npb25EYXRlOiAnJywKICAgICAgICBzZXNzaW9uUHJpY2U6ICcnLAogICAgICAgIHNlc3Npb25UaXBzOiAnJywKICAgICAgICBzZXNzaW9uU2VhdHM6ICcnLAogICAgICAgIHNlYXROdW1zOiAwCiAgICAgIH0sCiAgICAgIC8v6aqM6K+B6KGo5Y2V6KeE5YiZ5a+56LGhCiAgICAgIGFkZEZvcm1SdWxlczogewogICAgICAgIGhhbGxJZDogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+mAieaLqeW9seWOheWQjeensCcsIHRyaWdnZXI6ICdjaGFuZ2UnIH0KICAgICAgICBdLAogICAgICAgIGxhbmd1YWdlVmVyc2lvbjogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeeUteW9seivreiogCcsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgXSwKICAgICAgICBtb3ZpZUlkOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36YCJ5oup55S15b2x5ZCN56ewJywgdHJpZ2dlcjogJ2NoYW5nZScgfQogICAgICAgIF0sCiAgICAgICAgc2Vzc2lvbkRhdGU6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6nlnLrmrKHml6XmnJ8nLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgIF0sCiAgICAgICAgcGxheVRpbWU6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6nmkq3mlL7ml7bpl7QnLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgIF0sCiAgICAgICAgc2Vzc2lvblByaWNlOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl5Zy65qyh5Lu35qC8JywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICBdCiAgICAgIH0sCiAgICAgIGVkaXREaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgZWRpdEZvcm06IHt9LAogICAgICBjaGVja0FibGVJZDoge30sCiAgICAgIGVkaXRGb3JtUnVsZXM6IHsKICAgICAgICBoYWxsSWQ6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6nlvbHljoXlkI3np7AnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9CiAgICAgICAgXSwKICAgICAgICBsYW5ndWFnZVZlcnNpb246IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXnlLXlvbHor63oqIAnLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgIF0sCiAgICAgICAgbW92aWVJZDogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+mAieaLqeeUteW9seWQjeensCcsIHRyaWdnZXI6ICdjaGFuZ2UnIH0KICAgICAgICBdLAogICAgICAgIHNlc3Npb25EYXRlOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36YCJ5oup5Zy65qyh5pel5pyfJywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICBdLAogICAgICAgIHBsYXlUaW1lOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36YCJ5oup5pKt5pS+5pe26Ze0JywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICBdLAogICAgICAgIHNlc3Npb25QcmljZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeWcuuasoeS7t+agvCcsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgXQogICAgICB9LAogICAgICBzZWxlY3RlZEhhbGxJZDogJycsCiAgICAgIGVuZFBsYXlUaW1lOiAnJywKICAgICAgc2VsZWN0ZWRNb3ZpZUlkOiAnJywKICAgICAgc2VsZWN0ZWREYXRlOiAnJywKICAgICAgaGFsbExpc3Q6IFtdLAogICAgICBtb3ZpZUxpc3Q6IFtdLAogICAgICBtdWx0aXBsZVNlbGVjdGlvbjogW10sCiAgICAgIGNoZWNrRGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIHNlYXRzOiB7fSwKICAgICAgY29sOiAnJywKICAgICAgaXNTZWxlY3RlZDogewogICAgICAgIDA6ICdzZWF0LWRlZmF1bHQnLAogICAgICAgIDE6ICdzZWF0LWNob29zZScsCiAgICAgICAgMzogJ3NlYXQtc29sZCcKICAgICAgfSwKICAgICAgZWRpdFNlYXQ6IHt9LAogICAgICBjaGVja0RpYWxvZ1dpZHRoOiAnJywKICAgICAgcGlja2VyT3B0aW9uczogewogICAgICAgIGRpc2FibGVkRGF0ZSh0aW1lKSB7CiAgICAgICAgICByZXR1cm4gdGltZS5nZXRUaW1lKCkgPiBEYXRlLm5vdygpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgcm93TnVtczogJycsCiAgICAgIGNvbE51bXM6ICcnLAogICAgICByb3dTdGFydDogJycsCiAgICAgIGxvZ2luVXNlcjogSlNPTi5wYXJzZSh3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnbG9naW5Vc2VyJykpCiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRTZXNzaW9uTGlzdCgpCiAgICB0aGlzLmdldEhhbGxMaXN0KCkKICAgIHRoaXMuZ2V0TW92aWVMaXN0KCkKICAgIC8vIHRoaXMuY3VyQ2luZW1hTmFtZSA9IHRoaXMubG9naW5Vc2VyLmNpbmVtYU5hbWUKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldFNlc3Npb25MaXN0KCkgewogICAgICB0aGlzLnF1ZXJ5SW5mby5oYWxsSWQgPSB0aGlzLnNlbGVjdGVkSGFsbElkCiAgICAgIHRoaXMucXVlcnlJbmZvLm1vdmllSWQgPSB0aGlzLnNlbGVjdGVkTW92aWVJZAogICAgICB0aGlzLnF1ZXJ5SW5mby5zZXNzaW9uRGF0ZSA9IHRoaXMuc2VsZWN0ZWREYXRlCiAgICAgIGNvbnNvbGUubG9nKFN0cmluZyh0aGlzLnNlbGVjdGVkRGF0ZSkpCiAgICAgIGNvbnN0IF90aGlzID0gdGhpczsKICAgICAgYXhpb3MuZ2V0KCdzeXNTZXNzaW9uJywge3BhcmFtczogX3RoaXMucXVlcnlJbmZvfSkudGhlbihyZXNwID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwKQogICAgICAgIF90aGlzLnNlc3Npb25MaXN0ID0gcmVzcC5kYXRhLmRhdGE7CiAgICAgICAgX3RoaXMudG90YWwgPSByZXNwLmRhdGEudG90YWw7CiAgICAgICAgX3RoaXMucXVlcnlJbmZvLnBhZ2VTaXplID0gcmVzcC5kYXRhLnBhZ2VTaXplOwogICAgICAgIF90aGlzLnF1ZXJ5SW5mby5wYWdlTnVtID0gcmVzcC5kYXRhLnBhZ2VOdW07CiAgICAgIH0pCiAgICB9LAogICAgaGFuZGxlU2l6ZUNoYW5nZShuZXdTaXplKSB7CiAgICAgIHRoaXMucXVlcnlJbmZvLnBhZ2VTaXplID0gbmV3U2l6ZQogICAgICB0aGlzLmdldFNlc3Npb25MaXN0KCkKICAgICAgY29uc29sZS5sb2cobmV3U2l6ZSkKICAgIH0sCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKG5ld1BhZ2UpIHsKICAgICAgdGhpcy5xdWVyeUluZm8ucGFnZU51bSA9IG5ld1BhZ2UKICAgICAgdGhpcy5nZXRTZXNzaW9uTGlzdCgpCiAgICAgIGNvbnNvbGUubG9nKG5ld1BhZ2UpCiAgICB9LAogICAgc2hvd0FkZERpYWxvZygpewogICAgICB0aGlzLmFkZERpYWxvZ1Zpc2libGUgPSB0cnVlCiAgICB9LAogICAgLy8g55uR5ZCs5re75Yqg5a+56K+d5qGG55qE5YWz6Zet5LqL5Lu2CiAgICBhZGREaWFsb2dDbG9zZWQoKXsKICAgICAgdGhpcy4kcmVmcy5hZGRGb3JtUmVmLnJlc2V0RmllbGRzKCkKICAgIH0sCiAgICAvLyDnm5HlkKzmt7vliqDmjInpkq4KICAgIGFkZFNlc3Npb24oKXsKICAgICAgY29uc29sZS5sb2coJ+a3u+WKoOWcuuasoeaVsOaNruWkhOeQhuWJjScpCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuYWRkRm9ybSkKICAgICAgY29uc3QgX3RoaXMgPSB0aGlzCiAgICAgIC8vIOWkhOeQhue7k+adn+aXtumXtOWSjOaIquatouaXtumXtAogICAgICB0aGlzLmhhbmRsZUVuZFRpbWVBbmREZWFkbGluZShfdGhpcy5hZGRGb3JtLm1vdmllSWQsIF90aGlzLmFkZEZvcm0uc2Vzc2lvbkRhdGUsIF90aGlzLmFkZEZvcm0ucGxheVRpbWUpCiAgICAgIGNvbnNvbGUubG9nKCdmdW5jdGlvbua3u+WKoOWcuuasoeeahOe7k+adn+aXtumXtO+8micgKyBfdGhpcy5hZGRGb3JtLmVuZFRpbWUpCiAgICAgIHRoaXMuJHJlZnMuYWRkRm9ybVJlZi52YWxpZGF0ZShhc3luYyB2YWxpZCA9PiB7CiAgICAgICAgY29uc29sZS5sb2codmFsaWQpCiAgICAgICAgaWYgKCF2YWxpZCkgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+a3u+WKoOWcuuasoeS/oeaBr+Wksei0pScpCiAgICAgICAgLy/pqozor4HpgJrov4fvvIzlsIbnmbvlvZXnlKjmiLfnmoTlvbHpmaJpZOi1i+WAvOe7meihqOWNlQoKICAgICAgICBsZXQgc2VhdHMgPSAnJwogICAgICAgIGxldCBzZWF0TnVtcyA9IDAKICAgICAgICAvL+afpeivouW9seWOheS/oeaBr++8jOafpeWHuuWvueW6lOaOkuaVsOWSjOaOkuW6p+S9jeaVsO+8jOWhq+WFhXNlc3Npb25TZWF0c+Wtl+autQogICAgICAgIGF3YWl0IGF4aW9zLmdldCgnc3lzSGFsbC8nICsgdGhpcy5hZGRGb3JtLmhhbGxJZCkudGhlbihyZXNwID0+IHsKICAgICAgICAgIF90aGlzLnJvd051bXMgPSByZXNwLmRhdGEuZGF0YS5yb3dOdW1zCiAgICAgICAgICBfdGhpcy5jb2xOdW1zID0gcmVzcC5kYXRhLmRhdGEuc2VhdE51bXNSb3cKICAgICAgICAgIF90aGlzLnJvd1N0YXJ0ID0gcmVzcC5kYXRhLmRhdGEucm93U3RhcnQKICAgICAgICAgIHNlYXROdW1zID0gcmVzcC5kYXRhLmRhdGEuc2VhdE51bXMKICAgICAgICAgIHNlYXRzID0gcmVzcC5kYXRhLmRhdGEuc2VhdFN0YXRlCiAgICAgICAgfSkKCiAgICAgICAgLy8gbGV0IHJvdyA9IHRoaXMucm93TnVtcwogICAgICAgIC8vIGxldCBjb2wgPSB0aGlzLmNvbE51bXMKICAgICAgICAvLyBsZXQgc2VhdCA9IHt9CiAgICAgICAgLy8gZm9yIChsZXQgaSA9IDA7IGkgPCByb3c7IGkrKykgewogICAgICAgIC8vICAgbGV0IGFyciA9IFtdCiAgICAgICAgLy8gICBmb3IgKGxldCBqID0gMDsgaiA8IGNvbDsgaisrKSB7CiAgICAgICAgLy8gICAgIGFyci5wdXNoKDApCiAgICAgICAgLy8gICB9CiAgICAgICAgLy8gICBzZWF0W2lzTmFOKHBhcnNlSW50KF90aGlzLnJvd1N0YXJ0KSkgPyBTdHJpbmcuZnJvbUNoYXJDb2RlKGkgKyBfdGhpcy5yb3dTdGFydC5jaGFyQ29kZUF0KDApKSA6IGkgKyBwYXJzZUludChfdGhpcy5yb3dTdGFydCldID0gYXJyCiAgICAgICAgLy8gfQogICAgICAgIC8vIHRoaXMuJHNldCh0aGlzLmFkZEZvcm0sICdzZXNzaW9uU2VhdHMnLCBKU09OLnN0cmluZ2lmeShzZWF0KSkKICAgICAgICAvL+aWsOW7uuWcuuasoeaXtu+8jOWwhuW9seWOheeahOW6p+S9jeS/oeaBr+i1i+WAvOe7meWcuuasoQogICAgICAgIHRoaXMuJHNldCh0aGlzLmFkZEZvcm0sICdzZWF0TnVtcycsIHNlYXROdW1zKQogICAgICAgIHRoaXMuJHNldCh0aGlzLmFkZEZvcm0sICdzZXNzaW9uU2VhdHMnLCBzZWF0cykKICAgICAgICBjb25zb2xlLmxvZyhfdGhpcy5hZGRGb3JtLnNlc3Npb25TZWF0cykKCiAgICAgICAgLy8g6aKE5qCh6aqM5oiQ5Yqf77yM5Y+R572R57uc6K+35rGCCiAgICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5wb3N0WydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgIGF3YWl0IGF4aW9zLnBvc3QoJ3N5c1Nlc3Npb24nLCBKU09OLnN0cmluZ2lmeShfdGhpcy5hZGRGb3JtKSkudGhlbihyZXNwID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3ApCiAgICAgICAgICBpZiAocmVzcC5kYXRhLmNvZGUgIT09IDIwMCl7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+a3u+WKoOWcuuasoeS/oeaBr+Wksei0pe+8gScpCiAgICAgICAgICB9CiAgICAgICAgfSkKCiAgICAgICAgLy/pmpDol4/mt7vliqDlr7nor53moYYKICAgICAgICB0aGlzLmFkZERpYWxvZ1Zpc2libGUgPSBmYWxzZQogICAgICAgIC8v6YeN5paw5Yqg6L295YiX6KGoCiAgICAgICAgdGhpcy5nZXRTZXNzaW9uTGlzdCgpCiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmt7vliqDlnLrmrKHkv6Hmga/miJDlip/vvIEnKQogICAgICB9KQogICAgfSwKICAgIC8vIOacieiuouWNleWwseS4jeiDveWBmuS7u+S9leS/ruaUuQogICAgaXNBYmxlRWRpdChpZCkgewogICAgICB0aGlzLmNoZWNrQWJsZUlkLnNlc3Npb25JZCA9IGlkCiAgICAgIGF4aW9zLmdldCgnc3lzQmlsbCcsIHtwYXJhbXM6IHRoaXMuY2hlY2tBYmxlSWR9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhLnRvdGFsKQogICAgICAgIGNvbnNvbGUubG9nKCdkYXRhJykKICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKQogICAgICAgIGNvbnNvbGUubG9nKCdkYXRhLmRhdGEnKQogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEuZGF0YSkKICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhLmRhdGEubGVuZ3RoKQogICAgICAgIGxldCBiaWxscyA9IHJlc3BvbnNlLmRhdGEuZGF0YQogICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnRvdGFsID09PSAwKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygn56m655qE5Y+v5pS5JykKICAgICAgICAgIHRoaXMuc2hvd0VkaXREaWFsb2coaWQpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCfkv67mlLnliY3liKTmlq3mnInlnLrmrKHnm7jlhbMnKQogICAgICAgICAgbGV0IGJpbGxJZHMgPSAnJwogICAgICAgICAgZm9yIChsZXQgdGVtcCBvZiBiaWxscykgewogICAgICAgICAgICBiaWxsSWRzICs9IHRlbXAuYmlsbElkKycgJwogICAgICAgICAgfQogICAgICAgICAgY29uc29sZS5sb2coJ2JpbGxJZHMgaXMgOiAnK2JpbGxJZHMpCiAgICAgICAgICB0aGlzLiRhbGVydCgn5oqx5q2J77yB55S15b2x5Zy65qyh5pyJ55u45YWz6K6i5Y2V77yM5LiN6IO95L+u5pS555S15b2x5Zy65qyh5L+h5oGv44CCXG4nKyflr7zoh7TlvILluLjnmoTorqLljZXnvJblj7fkuLo6ICcrYmlsbElkcywgJ+S/ruaUueivt+axguW8guW4uOmAmuefpScsIHsKICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfmiJHnn6XpgZPkuoYnLAogICAgICAgICAgICBjYWxsYmFjazogYWN0aW9uID0+IHsKICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL3Nlc3Npb24nKQogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICAvLyDmmL7npLrkv67mlLnlr7nor53moYbvvIzlm57mmL7mlbDmja4KICAgIGFzeW5jIHNob3dFZGl0RGlhbG9nKGlkKXsKICAgICAgY29uc3QgX3RoaXMgPSB0aGlzCiAgICAgIGNvbnN0IHsgZGF0YSA6IHJlc30gPSBhd2FpdCBheGlvcy5nZXQoJ3N5c1Nlc3Npb24vZmluZC8nICsgaWQpCiAgICAgIHRoaXMuZWRpdEZvcm0gPSByZXMuZGF0YQogICAgICB0aGlzLmVkaXREaWFsb2dWaXNpYmxlID0gdHJ1ZQogICAgfSwKICAgIC8vIOebkeWQrOS/ruaUueWvueivneahhueahOWFs+mXreS6i+S7tgogICAgZWRpdERpYWxvZ0Nsb3NlZCgpewogICAgICB0aGlzLiRyZWZzLmVkaXRGb3JtUmVmLnJlc2V0RmllbGRzKCkKICAgIH0sCiAgICAvLyDkv67mlLnlnLrmrKHkv6Hmga/lubbmj5DkuqQKICAgIGVkaXRTZXNzaW9uSW5mbygpewogICAgICB0aGlzLmhhbmRsZUVuZFRpbWVBbmREZWFkbGluZSh0aGlzLmVkaXRGb3JtLm1vdmllSWQsIHRoaXMuZWRpdEZvcm0uc2Vzc2lvbkRhdGUsIHRoaXMuZWRpdEZvcm0ucGxheVRpbWUpCiAgICAgIGxldCByb3cgPSB0aGlzLmVkaXRGb3JtLnJvd051bXMKICAgICAgbGV0IGNvbCA9IHRoaXMuZWRpdEZvcm0uc2VhdE51bXNSb3cKICAgICAgdGhpcy4kc2V0KHRoaXMuZWRpdEZvcm0sICdzZWF0TnVtcycsIHJvdyAqIGNvbCkKICAgICAgbGV0IHNlYXQgPSB7fQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJvdzsgaSsrKSB7CiAgICAgICAgbGV0IGFyciA9IFtdCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBjb2w7IGorKykgewogICAgICAgICAgYXJyLnB1c2goMCkKICAgICAgICB9CiAgICAgICAgc2VhdFtpc05hTihwYXJzZUludCh0aGlzLmVkaXRGb3JtLnJvd1N0YXJ0KSkgPyBTdHJpbmcuZnJvbUNoYXJDb2RlKGkgKyB0aGlzLmVkaXRGb3JtLnJvd1N0YXJ0LmNoYXJDb2RlQXQoMCkpIDogaSArIHBhcnNlSW50KHRoaXMuZWRpdEZvcm0ucm93U3RhcnQpXSA9IGFycgogICAgICB9CiAgICAgIHRoaXMuJHNldCh0aGlzLmVkaXRGb3JtLCAnc2VhdFN0YXRlJywgSlNPTi5zdHJpbmdpZnkoc2VhdCkpCgogICAgICB0aGlzLiRyZWZzLmVkaXRGb3JtUmVmLnZhbGlkYXRlKGFzeW5jIHZhbGlkID0+IHsKICAgICAgICBjb25zdCBfdGhpcyA9IHRoaXMKICAgICAgICBpZiAoIXZhbGlkKSByZXR1cm4KICAgICAgICBsZXQgc3VjY2VzcyA9IHRydWUKICAgICAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLnB1dFsnQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbicKICAgICAgICBhd2FpdCBheGlvcy5wdXQoJ3N5c1Nlc3Npb24nLCBKU09OLnN0cmluZ2lmeShfdGhpcy5lZGl0Rm9ybSkpLnRoZW4ocmVzcCA9PiB7CiAgICAgICAgICBpZiAocmVzcC5kYXRhLmNvZGUgIT09IDIwMCl7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+S/ruaUueWcuuasoeS/oeaBr+Wksei0pe+8gScpCiAgICAgICAgICAgIHN1Y2Nlc3MgPSBmYWxzZQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgaWYgKCFzdWNjZXNzKSByZXR1cm4KICAgICAgICB0aGlzLmVkaXREaWFsb2dWaXNpYmxlID0gZmFsc2UKICAgICAgICB0aGlzLmdldFNlc3Npb25MaXN0KCkKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+S/ruaUueWcuuasoeS/oeaBr+aIkOWKn++8gScpCiAgICAgIH0pCiAgICB9LAogICAgLy/lpITnkIbmlaPlnLrml7bpl7TlkozniYflnLrmiKrmraLml7bpl7TvvIjkv67mlLnmiJbliKDpmaTnlLXlvbHjgIHlvbHljoXkv6Hmga/miKrmraLml7bpl7Tkv67mlLnmiJbliKDpmaTnlLXlvbHjgIHlvbHljoXkv6Hmga/miKrmraLml7bpl7TvvIkKICAgIGhhbmRsZUVuZFRpbWVBbmREZWFkbGluZShtb3ZpZUlkLCBzZXNzaW9uRGF0ZSwgcGxheVRpbWUpewogICAgICB0aGlzLmFkZEZvcm0uZGVhZGxpbmUgPSAnJwogICAgICB0aGlzLmVkaXRGb3JtLmRlYWRsaW5lID0gJycKICAgICAgdGhpcy5hZGRGb3JtLmVuZFRpbWUgPSAnJwogICAgICB0aGlzLmVkaXRGb3JtLmVuZFRpbWUgPSAnJwogICAgICBsZXQgcmVzdWx0RW5kVGltZSA9ICcnCiAgICAgIC8v55S15b2x5pe26ZW/CiAgICAgIGxldCBtb3ZpZUxlbmd0aFRpbWUKICAgICAgZm9yIChsZXQgaXRlbSBvZiB0aGlzLm1vdmllTGlzdCkgewogICAgICAgIGlmIChpdGVtLm1vdmllSWQgPT09IG1vdmllSWQpIHsKICAgICAgICAgIG1vdmllTGVuZ3RoVGltZSA9IGl0ZW0ubW92aWVMZW5ndGgKICAgICAgICAgIGJyZWFrCiAgICAgICAgfQogICAgICB9CiAgICAgIC8v5Li05pe25pe26Ze077yM55So5LqO6K6w5b2V5byA5pKt5pe26Ze077yM5L2/55SobW9tZW505bel5YW3CiAgICAgIGxldCB0ZW1wVGltZSA9IG5ldyBEYXRlKHNlc3Npb25EYXRlKQogICAgICAvL+WIhuemu+W8gOaSreaXtumXtAogICAgICBsZXQgaG91cnNNaW4gPSBwbGF5VGltZS5zcGxpdCgnOicpCiAgICAgIHRlbXBUaW1lLnNldEhvdXJzKGhvdXJzTWluWzBdKQogICAgICB0ZW1wVGltZS5zZXRNaW51dGVzKGhvdXJzTWluWzFdKQogICAgICB0ZW1wVGltZS5zZXRTZWNvbmRzKDApCiAgICAgIGxldCB0ZW1wRW5kVGltZSA9IG1vbWVudCh0ZW1wVGltZSkuYWRkKG1vdmllTGVuZ3RoVGltZSwnbScpLl9kCiAgICAgIC8vIOeJh+Wcuue7k+adn+aXtumXtOWGjeWKoDIw5YiG6ZKfCiAgICAgIGxldCB0ZW1wRGVhZGxpbmUgPSBtb21lbnQobW9tZW50KHRlbXBFbmRUaW1lKS5hZGQoMjAsJ20nKS5fZCkuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tOnNzJykKCiAgICAgIC8vIOiuvue9rmRlYWRsaW5lCiAgICAgIHRoaXMuYWRkRm9ybS5kZWFkbGluZSA9IHRlbXBEZWFkbGluZQogICAgICB0aGlzLmVkaXRGb3JtLmRlYWRsaW5lID0gdGVtcERlYWRsaW5lCiAgICAgIGNvbnNvbGUubG9nKCfkv67mlLnlkI7ml7bpl7QnK3RlbXBFbmRUaW1lKTsKICAgICAgbGV0IGVuZEhvdXJzID0gdGVtcEVuZFRpbWUuZ2V0SG91cnMoKQogICAgICBsZXQgZW5kTWlucyA9IHRlbXBFbmRUaW1lLmdldE1pbnV0ZXMoKQogICAgICAvL+aXtumXtOagvOW8j+WMlgogICAgICBpZiAoZW5kSG91cnMgPCAxMCkgewogICAgICAgIHJlc3VsdEVuZFRpbWUgPSAnMCcrZW5kSG91cnMrJzonCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVzdWx0RW5kVGltZSA9IGVuZEhvdXJzKyc6JwogICAgICB9CiAgICAgIGlmIChlbmRNaW5zIDwgMTApIHsKICAgICAgICByZXN1bHRFbmRUaW1lICs9ICcwJytlbmRNaW5zCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVzdWx0RW5kVGltZSArPSBlbmRNaW5zCiAgICAgIH0KICAgICAgY29uc29sZS5sb2coJ+a3u+WKoOWcuuasoeeahOe7k+adn+aXtumXtO+8micgKyByZXN1bHRFbmRUaW1lKQogICAgICAvLyByZXR1cm4gcmVzdWx0RW5kVGltZQogICAgICB0aGlzLmFkZEZvcm0uZW5kVGltZSA9IHJlc3VsdEVuZFRpbWUKICAgICAgdGhpcy5lZGl0Rm9ybS5lbmRUaW1lID0gcmVzdWx0RW5kVGltZQogICAgfSwKICAgIC8vIOebkeWQrOWkmumAieahhuWPmOWMlgogICAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKHZhbCl7CiAgICAgIHRoaXMubXVsdGlwbGVTZWxlY3Rpb24gPSB2YWwKICAgIH0sCiAgICAvLyDmibnph4/liKDpmaTliY3moKHpqowKICAgIGFzeW5jIGlzQWJsZU11bHRpcGxlRGVsZXRlKCkgewogICAgICBsZXQgYWJsZU11bHRpcGxlRGVsZXRlID0gdHJ1ZQogICAgICBsZXQgaWRzID0gJycKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm11bHRpcGxlU2VsZWN0aW9uLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy5jaGVja0FibGVJZC5zZXNzaW9uSWQgPSB0aGlzLm11bHRpcGxlU2VsZWN0aW9uW2ldLnNlc3Npb25JZAoKICAgICAgICBjb25zb2xlLmxvZygnc2Vzc2lvbmlkJyArIHRoaXMuY2hlY2tBYmxlSWQuc2Vzc2lvbklkKQogICAgICAgIC8vIOavj+adoeaVsOaNrumDvei/m+ihjOaXtumXtOagoemqjAogICAgICAgIC8vIGNvbnN0IHsgZGF0YSA6IHJlc3AgfSA9IGF3YWl0IGF4aW9zLmdldCgnc3lzU2Vzc2lvbicsIHtwYXJhbXM6IHRoaXMuY2hlY2tBYmxlSWR9KQogICAgICAgIGNvbnN0IHsgZGF0YSA6IHJlc3AgfSA9IGF3YWl0IGF4aW9zLmdldCgnc3lzU2Vzc2lvbi9maW5kLycgKyB0aGlzLmNoZWNrQWJsZUlkLnNlc3Npb25JZCkKICAgICAgICBjb25zb2xlLmxvZygn6I635Y+W55qE5Zy65qyh5L+h5oGvJykKICAgICAgICBjb25zb2xlLmxvZyhyZXNwLmRhdGEpCiAgICAgICAgbGV0IGN1clNlc3Npb25JbmZvID0gcmVzcC5kYXRhCiAgICAgICAgLy8g5aaC5p6c5b2T5YmN5Zy65qyh5bey5a6M5oiQ77yM5LiN5pON5L2cCiAgICAgICAgaWYgKGN1clNlc3Npb25JbmZvLmRlYWRsaW5lIDw9IG1vbWVudChuZXcgRGF0ZSgpKS5mb3JtYXQoJ1lZWVktTU0tREQgSEg6bW06c3MnKSkgY29udGludWUKCiAgICAgICAgY29uc3QgeyBkYXRhIDogcmVzIH0gPSBhd2FpdCBheGlvcy5nZXQoJ3N5c0JpbGwnLCB7cGFyYW1zOiB0aGlzLmNoZWNrQWJsZUlkfSkKICAgICAgICBpZiAocmVzLmRhdGEubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICBpZHMgKz0gdGhpcy5tdWx0aXBsZVNlbGVjdGlvbltpXS5zZXNzaW9uSWQgKyAnICcKICAgICAgICAgIGFibGVNdWx0aXBsZURlbGV0ZSA9IGZhbHNlCiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChhYmxlTXVsdGlwbGVEZWxldGUgPT09IGZhbHNlKSB7CiAgICAgICAgLy8gJ+aKseatie+8geOAglxcblwnK1wn5a+86Ie05byC5bi455qE6K6i5Y2V57yW5Y+35Li6OiBcJycKICAgICAgICB0aGlzLiRhbGVydCgn5oqx5q2J77yB55S15b2x5Zy65qyh5pyJ55u45YWz6K6i5Y2V77yM5LiN6IO95Yig6Zmk55S15b2x5Zy65qyh5L+h5oGv44CCXG4nICsgJ+WvvOiHtOW8guW4uOeahOWcuuasoee8luWPt+S4ujogJyArIGlkcywgJ+aJuemHj+WIoOmZpOivt+axguW8guW4uOmAmuefpScsIHsKICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn5oiR55+l6YGT5LqGJywKICAgICAgICAgIGNhbGxiYWNrOiBhY3Rpb24gPT4gewogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL3Nlc3Npb24nKQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgcmV0dXJuCiAgICAgIH0KICAgICAgYXdhaXQgdGhpcy5tdWx0aXBsZURlbGV0ZSgpCiAgICB9LAogICAgYXN5bmMgbXVsdGlwbGVEZWxldGUoKXsKICAgICAgY29uc3QgX3RoaXMgPSB0aGlzCiAgICAgIC8v6K+i6Zeu55So5oi35piv5ZCm56Gu6K6k5Yig6ZmkCiAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCB0aGlzLiRjb25maXJtKCfmraTmk43kvZzlsIbmsLjkuYXliKDpmaTov5nkupvmnaHnm64sIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkuY2F0Y2goZXJyID0+IGVycikKCiAgICAgIC8vIOeUqOaIt+ehruiupOWIoOmZpCwgcmVzcOS4uuWtl+espuS4siJjb25maXJtIgogICAgICAvLyDnlKjmiLflj5bmtojliKDpmaTvvIxyZXNw5Li65a2X56ym5LiyImNhbmNlbCIKICAgICAgaWYgKHJlc3AgPT09ICdjYW5jZWwnKXsKICAgICAgICByZXR1cm4gX3RoaXMuJG1lc3NhZ2UuaW5mbygn5bey5Y+W5raI5Yig6ZmkJykKICAgICAgfQoKICAgICAgbGV0IGlkcyA9IFtdCiAgICAgIHRoaXMubXVsdGlwbGVTZWxlY3Rpb24uZm9yRWFjaChkYXRhID0+IHsKICAgICAgICBpZHMucHVzaChkYXRhLnNlc3Npb25JZCkKICAgICAgfSkKICAgICAgY29uc29sZS5sb2coaWRzKQogICAgICBhd2FpdCBheGlvcy5kZWxldGUoJ3N5c1Nlc3Npb24vJyArIGlkcykudGhlbihyZXNwID0+IHsKICAgICAgICBpZiAocmVzcC5kYXRhLmNvZGUgIT09IDIwMCl7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+aJuemHj+WIoOmZpOWcuuasoeWksei0pe+8gScpCiAgICAgICAgfQogICAgICB9KQogICAgICB0aGlzLmdldFNlc3Npb25MaXN0KCkKICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmibnph4/liKDpmaTlnLrmrKHmiJDlip/vvIEnKQogICAgfSwKICAgIC8vIOS4pOWxguajgOmqjO+8jOesrOS4gOWxguajgOmqjOWcuuasoeaYr+WQpuWujOaIkO+8jOWujOaIkOWImeWPr+WIoO+8m+esrOS6jOWxguajgOmqjOacquWujOaIkO+8jOaYr+WQpuacieiuouWNle+8jOacieiuouWNleS4jeWPr+WIoOOAguS4jeiuuuiuouWNleaUr+S7mOS4juWQpgogICAgYXN5bmMgaXNBYmxlRGVsZXRlKHNlc3Npb24pIHsKICAgICAgaWYgKHNlc3Npb24uZGVhZGxpbmUgPD0gbW9tZW50KG5ldyBEYXRlKCkpLmZvcm1hdCgnWVlZWS1NTS1ERCBISDptbTpzcycpKSB7CiAgICAgICAgYXdhaXQgdGhpcy5kZWxldGVTZXNzaW9uQnlJZChzZXNzaW9uLnNlc3Npb25JZCkKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICB0aGlzLmNoZWNrQWJsZUlkLnNlc3Npb25JZCA9IHNlc3Npb24uc2Vzc2lvbklkCiAgICAgIGF4aW9zLmdldCgnc3lzQmlsbCcsIHtwYXJhbXM6IHRoaXMuY2hlY2tBYmxlSWR9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhLnRvdGFsKQogICAgICAgIGxldCBiaWxscyA9IHJlc3BvbnNlLmRhdGEuZGF0YQogICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnRvdGFsID09PSAwKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygn56m655qE5Y+v5pS5JykKICAgICAgICAgIHRoaXMuZGVsZXRlU2Vzc2lvbkJ5SWQoc2Vzc2lvbi5zZXNzaW9uSWQpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCfliKDpmaTliY3liKTmlq3mnInlnLrmrKHnm7jlhbMnKQogICAgICAgICAgbGV0IGJpbGxJZHMgPSAnJwogICAgICAgICAgZm9yIChsZXQgdGVtcCBvZiBiaWxscykgewogICAgICAgICAgICBjb25zb2xlLmxvZyh0ZW1wKQogICAgICAgICAgICBiaWxsSWRzICs9IHRlbXAuYmlsbElkKycgJwogICAgICAgICAgfQogICAgICAgICAgY29uc29sZS5sb2coJ2JpbGxJZHMgaXMgOiAnK2JpbGxJZHMpCiAgICAgICAgICB0aGlzLiRhbGVydCgn5oqx5q2J77yB55S15b2x5Zy65qyh5pyJ55u45YWz6K6i5Y2V77yM5LiN6IO95Yig6Zmk55S15b2x5Zy65qyh5L+h5oGv44CCXG4nKyflr7zoh7TlvILluLjnmoTorqLljZXnvJblj7fkuLo6ICcrYmlsbElkcywgJ+WIoOmZpOivt+axguW8guW4uOmAmuefpScsIHsKICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfmiJHnn6XpgZPkuoYnLAogICAgICAgICAgICBjYWxsYmFjazogYWN0aW9uID0+IHsKICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL3Nlc3Npb24nKQogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICAvL+agueaNrmlk5Yig6Zmk5a+55bqU55qE5b2x5Y6F5YiG57G7CiAgICBhc3luYyBkZWxldGVTZXNzaW9uQnlJZChpZCl7CiAgICAgIGNvbnN0IF90aGlzID0gdGhpcwogICAgICAvL+ivoumXrueUqOaIt+aYr+WQpuehruiupOWIoOmZpAogICAgICBjb25zdCByZXNwID0gYXdhaXQgdGhpcy4kY29uZmlybSgn5q2k5pON5L2c5bCG5rC45LmF5Yig6Zmk6K+l5p2h55uuLCDmmK/lkKbnu6fnu60/JywgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLmNhdGNoKGVyciA9PiBlcnIpCgogICAgICAvLyDnlKjmiLfnoa7orqTliKDpmaQsIHJlc3DkuLrlrZfnrKbkuLIiY29uZmlybSIKICAgICAgLy8g55So5oi35Y+W5raI5Yig6Zmk77yMcmVzcOS4uuWtl+espuS4siJjYW5jZWwiCiAgICAgIGNvbnNvbGUubG9nKHJlc3ApCiAgICAgIGlmIChyZXNwID09PSAnY2FuY2VsJyl7CiAgICAgICAgcmV0dXJuIF90aGlzLiRtZXNzYWdlLmluZm8oJ+W3suWPlua2iOWIoOmZpCcpCiAgICAgIH0KCiAgICAgIGF3YWl0IGF4aW9zLmRlbGV0ZSgnc3lzU2Vzc2lvbi8nICsgaWQpLnRoZW4ocmVzcCA9PiB7CiAgICAgICAgaWYgKHJlc3AuZGF0YS5jb2RlICE9PSAyMDApewogICAgICAgICAgX3RoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5Yig6Zmk5Zy65qyh5L+h5oGv5aSx6LSl77yBJykKICAgICAgICB9CiAgICAgIH0pCiAgICAgIHRoaXMuZ2V0U2Vzc2lvbkxpc3QoKQogICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WIoOmZpOWcuuasoeS/oeaBr+aIkOWKn++8gScpCiAgICB9LAogICAgZ2V0SGFsbExpc3QoKXsKICAgICAgY29uc3QgX3RoaXMgPSB0aGlzCiAgICAgIGF4aW9zLmdldCgnc3lzSGFsbCcpLnRoZW4ocmVzcCA9PiB7CiAgICAgICAgX3RoaXMuaGFsbExpc3QgPSByZXNwLmRhdGEuZGF0YTsKICAgICAgfSkKICAgIH0sCiAgICBnZXRNb3ZpZUxpc3QoKXsKICAgICAgY29uc3QgX3RoaXMgPSB0aGlzCiAgICAgIGF4aW9zLmdldCgnc3lzTW92aWUvZmluZCcpLnRoZW4ocmVzcCA9PiB7CiAgICAgICAgX3RoaXMubW92aWVMaXN0ID0gcmVzcC5kYXRhLmRhdGE7CiAgICAgIH0pCiAgICB9LAogICAgYXN5bmMgY2hlY2tTZWF0KGlkKXsKICAgICAgY29uc3QgX3RoaXMgPSB0aGlzCiAgICAgIGF3YWl0IGF4aW9zLmdldCgnc3lzU2Vzc2lvbi9maW5kLycgKyBpZCkudGhlbihyZXNwID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwKQogICAgICAgIF90aGlzLnNlYXRzID0gSlNPTi5wYXJzZShyZXNwLmRhdGEuZGF0YS5zZXNzaW9uU2VhdHMpCiAgICAgICAgX3RoaXMuY29sID0gcmVzcC5kYXRhLmRhdGEuc3lzSGFsbC5zZWF0TnVtc1JvdwogICAgICB9KQogICAgICBjb25zb2xlLmxvZyh0aGlzLmNvbCkKICAgICAgdGhpcy5jaGVja0RpYWxvZ1dpZHRoID0gMjAwICsgdGhpcy5jb2wgKiA0MCArICdweCcKICAgICAgdGhpcy5jaGVja0RpYWxvZ1Zpc2libGUgPSB0cnVlCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["SessionInfo.vue"],"names":[],"mappings":";AA8PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SessionInfo.vue","sourceRoot":"src/views/hall","sourcesContent":["<template>\n  <div>\n    <!--面包屑导航区域-->\n    <div class=\"board\">\n      <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n        <el-breadcrumb-item :to=\"{ path: '/welcome' }\">首页</el-breadcrumb-item>\n        <el-breadcrumb-item>场次管理</el-breadcrumb-item>\n        <el-breadcrumb-item>场次信息管理</el-breadcrumb-item>\n      </el-breadcrumb>\n    </div>\n\n    <!--卡片视图-->\n    <el-card class=\"box-card\">\n      <el-row :gutter=\"24\">\n        <el-col :span=\"4\">\n          <el-select v-model=\"selectedHallId\" placeholder=\"请选择影厅名称\" clearable>\n            <el-option\n                v-for=\"item in hallList\"\n                :key=\"item.hallId\"\n                :label=\"item.hallName\"\n                :value=\"item.hallId\">\n            </el-option>\n          </el-select>\n        </el-col>\n        <el-col :span=\"4\">\n          <el-select v-model=\"selectedMovieId\" placeholder=\"请选择电影名称\" clearable>\n            <el-option\n                v-for=\"item in movieList\"\n                :key=\"item.movieId\"\n                :label=\"item.movieName\"\n                :value=\"item.movieId\">\n            </el-option>\n          </el-select>\n        </el-col>\n\n        <el-col :span=\"10\">\n          <el-date-picker\n              v-model=\"selectedDate\"\n              value-format=\"yyyy-MM-dd\"\n              type=\"date\"\n              placeholder=\"选择日期\">\n          </el-date-picker>\n          \n        </el-col>\n      </el-row>\n      <br>\n      <el-row>\n        <el-col :span=\"24\">\n          \n          <el-button @click=\"getSessionList\" style=\"font-size: 22px;\">\n            <i class=\"iconfont icon-r-find\" style=\"font-size: 24px;\"></i> 搜索\n          </el-button>\n          <el-button type=\"primary\" @click=\"showAddDialog\" style=\"font-size: 22px;\">\n            <i class=\"iconfont icon-r-add\" style=\"font-size: 24px;\"></i> 添加场次\n          </el-button>\n<!--          <el-button type=\"danger\" @click=\"multipleDelete\">批量删除</el-button>-->\n          <el-button type=\"danger\" style=\"font-size: 22px;\" @click=\"isAbleMultipleDelete\">\n            <i class=\"iconfont icon-r-delete\" style=\"font-size: 24px;\"></i> 批量删除\n          </el-button>\n        </el-col>\n      </el-row>\n\n      <!--影厅分类列表-->\n      <el-table :data=\"sessionList\" style=\"width: 100%\" border stripe @selection-change=\"handleSelectionChange\">\n        <el-table-column type=\"selection\" width=\"55\"></el-table-column>\n        <el-table-column prop=\"sessionId\" label=\"#\" width=\"40\"></el-table-column>\n        <el-table-column prop=\"sysHall.hallName\" label=\"影厅名称\"></el-table-column>\n        <el-table-column prop=\"sysMovie.movieName\" label=\"电影名称\"></el-table-column>\n        <el-table-column prop=\"languageVersion\" label=\"语言\"></el-table-column>\n        <el-table-column prop=\"sessionDate\" label=\"场次时间\" width=\"100\"></el-table-column>\n        <el-table-column prop=\"playTime\" label=\"播放时间\" width=\"110\">\n          <template slot-scope=\"scope\">\n            <span>{{scope.row.playTime}} - {{scope.row.endTime}}</span>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"sessionPrice\" label=\"场次价格\"></el-table-column>\n        <el-table-column prop=\"seatNums\" label=\"总座位数\"></el-table-column>\n        <el-table-column prop=\"sallNums\" label=\"已售\"></el-table-column>\n        <el-table-column prop=\"seatNums - sallNums\" label=\"剩余\">\n          <template slot-scope=\"scope\">\n            <span>{{scope.row.seatNums - scope.row.sallNums}}</span>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"sessionTips\" label=\"提示信息\"></el-table-column>\n\n        <el-table-column label=\"操作\" width=\"250\" align=\"center\" fixed=\"right\">\n          <template slot-scope=\"scope\">\n            <el-tooltip effect=\"dark\" content=\"修改场次信息\" placement=\"top\" :enterable=\"false\" :open-delay=\"500\">\n              <el-button type=\"primary\" @click=\"isAbleEdit(scope.row.sessionId)\">\n                <i class=\"iconfont icon-r-edit\" style=\"font-size: 22px;\"></i>\n              </el-button>\n            </el-tooltip>\n            <el-tooltip effect=\"dark\" content=\"删除场次\" placement=\"top\" :enterable=\"false\" :open-delay=\"500\">\n              <el-button type=\"danger\" @click=\"isAbleDelete(scope.row)\">\n                <i class=\"iconfont icon-r-delete\" style=\"font-size: 24px;\"></i>\n              </el-button>\n            </el-tooltip>\n            <el-tooltip effect=\"dark\" content=\"查看座位\" placement=\"top\" :enterable=\"false\" :open-delay=\"500\">\n              <el-button type=\"warning\" @click=\"checkSeat(scope.row.sessionId)\">\n                <i class=\"iconfont icon-r-find\" style=\"font-size: 24px;\"></i>\n              </el-button>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <!--分页区域-->\n      <el-pagination\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n          :current-page=\"queryInfo.pageNum\"\n          :page-sizes=\"[5, 7, 9]\"\n          :page-size=\"queryInfo.pageSize\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"total\">\n      </el-pagination>\n\n    </el-card>\n\n    <!--添加场次对话框-->\n    <el-dialog title=\"添加场次\" :visible.sync=\"addDialogVisible\" width=\"60%\" @close=\"addDialogClosed\">\n      <!--内容主题区-->\n      <el-form :model=\"addForm\" :rules=\"addFormRules\" ref=\"addFormRef\" label-width=\"150px\">\n        <!--prop：在addFormRules中定义校验规则， v-model：双向绑定数据-->\n        <el-form-item label=\"影厅名称\" prop=\"hallId\">\n          <el-select v-model=\"addForm.hallId\" placeholder=\"请选择影厅名称\" clearable >\n            <el-option\n                v-for=\"item in hallList\"\n                :key=\"item.hallId\"\n                :label=\"item.hallName\"\n                :value=\"item.hallId\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"语言版本\" prop=\"languageVersion\">\n          <el-input v-model=\"addForm.languageVersion\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"电影名称\" prop=\"movieId\">\n          <el-select v-model=\"addForm.movieId\" placeholder=\"请选择电影名称\" clearable >\n            <el-option\n                v-for=\"item in movieList\"\n                :key=\"item.movieId\"\n                :label=\"item.movieName\"\n                :value=\"item.movieId\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"场次日期\" prop=\"sessionDate\">\n          <el-date-picker\n              v-model=\"addForm.sessionDate\"\n              value-format=\"yyyy-MM-dd\"\n              type=\"date\"\n              placeholder=\"选择日期\">\n          </el-date-picker>\n        </el-form-item>\n        <el-form-item label=\"播放时间\" prop=\"sessionTime\">\n          <el-time-picker\n            v-model=\"addForm.playTime\"\n            value-format = 'HH:mm'\n            placeholder=\"选择播放时间\">\n          </el-time-picker>\n        </el-form-item>\n        <el-form-item label=\"场次价格\" prop=\"sessionPrice\">\n          <el-input v-model=\"addForm.sessionPrice\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"提示信息\" prop=\"sessionTips\">\n          <el-input v-model=\"addForm.sessionTips\"></el-input>\n        </el-form-item>\n      </el-form>\n      <!--底部区域-->\n      <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"addDialogVisible = false\" style=\"font-size: 18px;\"><i class=\"iconfont icon-r-left\" style=\"font-size: 24px;\"></i> 取 消</el-button>\n      <el-button type=\"primary\" @click=\"addSession\" style=\"font-size: 18px;\"><i class=\"iconfont icon-r-yes\" style=\"font-size: 24px;\"></i> 确 定</el-button>\n      </span>\n    </el-dialog>\n\n    <!--修改场次对话框-->\n    <el-dialog title=\"修改场次\" :visible.sync=\"editDialogVisible\" width=\"60%\" @close=\"editDialogClosed\">\n      <el-form :model=\"editForm\" :rules=\"editFormRules\" ref=\"editFormRef\" label-width=\"150px\">\n        <el-form-item label=\"影厅名称\" prop=\"hallId\">\n          <el-select v-model=\"editForm.hallId\" placeholder=\"请选择影厅名称\" clearable >\n            <el-option\n                v-for=\"item in hallList\"\n                :key=\"item.hallId\"\n                :label=\"item.hallName\"\n                :value=\"item.hallId\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"语言版本\" prop=\"languageVersion\">\n          <el-input v-model=\"editForm.languageVersion\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"电影名称\" prop=\"movieId\">\n          <el-select v-model=\"editForm.movieId\" placeholder=\"请选择电影名称\" clearable >\n            <el-option\n                v-for=\"item in movieList\"\n                :key=\"item.movieId\"\n                :label=\"item.movieName\"\n                :value=\"item.movieId\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"场次日期\" prop=\"sessionDate\">\n          <el-date-picker\n              v-model=\"editForm.sessionDate\"\n              value-format=\"yyyy-MM-dd\"\n              type=\"date\"\n              placeholder=\"选择日期\">\n          </el-date-picker>\n        </el-form-item>\n        <el-form-item label=\"播放时间\" prop=\"sessionTime\">\n          <el-time-picker\n            v-model=\"editForm.playTime\"\n            value-format = 'HH:mm'\n            placeholder=\"选择播放时间\">\n          </el-time-picker>\n        </el-form-item>\n        <el-form-item label=\"场次价格\" prop=\"sessionPrice\">\n          <el-input v-model=\"editForm.sessionPrice\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"提示信息\" prop=\"sessionTips\">\n          <el-input v-model=\"editForm.sessionTips\"></el-input>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"editDialogVisible = false\" style=\"font-size: 18px;\"><i class=\"iconfont icon-r-left\" style=\"font-size: 24px;\"></i> 取 消</el-button>\n        <el-button type=\"primary\" @click=\"editSessionInfo\" style=\"font-size: 18px;\"><i class=\"iconfont icon-r-yes\" style=\"font-size: 24px;\"></i> 确 定</el-button>\n      </span>\n    </el-dialog>\n\n    <!--安排座位对话框-->\n    <el-dialog title=\"查看座位\" :visible.sync=\"checkDialogVisible\" :width=\"checkDialogWidth\">\n      <div style=\"display:flex; align-content: center\">\n        <span style=\"margin-right: 10px\">启用</span>\n        <span class=\"seat\" :class=\"isSelected[0]\"></span>\n        <span style=\"margin: 0 10px\">禁用</span>\n        <span class=\"seat\" :class=\"isSelected[1]\"></span>\n        <span style=\"margin: 0 10px\">售出</span>\n        <span class=\"seat\" :class=\"isSelected[2]\"></span>\n      </div>\n      <br/>\n      <div class=\"row\" v-for=\"(value, key) in seats\">\n        <span style=\"margin-right: 100px\">{{key}}</span>\n        <div style=\"display: flex; justify-content: flex-end\">\n          <span class=\"seat\" :class=\"isSelected[seats[key][index]]\" v-for=\"(item, index) in value\"></span>\n        </div>\n      </div>\n    </el-dialog>\n\n\n  </div>\n</template>\n\n<script>\nimport global from \"@/assets/css/global.css\"\nimport echarts from 'echarts'\nimport moment from 'moment'\nexport default {\n  name: \"HallInfo\",\n  data() {\n    return {\n      queryInfo: {\n        hallId: '',\n        movieId: '',\n        sessionDate: '',\n        pageNum: 1,\n        pageSize: 7\n      },\n      sessionList: [],\n      total: 0,\n      //控制对话框的显示与隐藏\n      addDialogVisible: false,\n      //添加影厅的表单数据\n      addForm: {\n        hallId: '',\n        languageVersion: '',\n        movieId: '',\n        playTime: '',\n        endTime: '',\n        deadline: '',\n        sessionDate: '',\n        sessionPrice: '',\n        sessionTips: '',\n        sessionSeats: '',\n        seatNums: 0\n      },\n      //验证表单规则对象\n      addFormRules: {\n        hallId: [\n          { required: true, message: '请选择影厅名称', trigger: 'change' }\n        ],\n        languageVersion: [\n          { required: true, message: '请输入电影语言', trigger: 'blur' }\n        ],\n        movieId: [\n          { required: true, message: '请选择电影名称', trigger: 'change' }\n        ],\n        sessionDate: [\n          { required: true, message: '请选择场次日期', trigger: 'blur' }\n        ],\n        playTime: [\n          { required: true, message: '请选择播放时间', trigger: 'blur' }\n        ],\n        sessionPrice: [\n          { required: true, message: '请输入场次价格', trigger: 'blur' }\n        ]\n      },\n      editDialogVisible: false,\n      editForm: {},\n      checkAbleId: {},\n      editFormRules: {\n        hallId: [\n          { required: true, message: '请选择影厅名称', trigger: 'change' }\n        ],\n        languageVersion: [\n          { required: true, message: '请输入电影语言', trigger: 'blur' }\n        ],\n        movieId: [\n          { required: true, message: '请选择电影名称', trigger: 'change' }\n        ],\n        sessionDate: [\n          { required: true, message: '请选择场次日期', trigger: 'blur' }\n        ],\n        playTime: [\n          { required: true, message: '请选择播放时间', trigger: 'blur' }\n        ],\n        sessionPrice: [\n          { required: true, message: '请输入场次价格', trigger: 'blur' }\n        ]\n      },\n      selectedHallId: '',\n      endPlayTime: '',\n      selectedMovieId: '',\n      selectedDate: '',\n      hallList: [],\n      movieList: [],\n      multipleSelection: [],\n      checkDialogVisible: false,\n      seats: {},\n      col: '',\n      isSelected: {\n        0: 'seat-default',\n        1: 'seat-choose',\n        3: 'seat-sold'\n      },\n      editSeat: {},\n      checkDialogWidth: '',\n      pickerOptions: {\n        disabledDate(time) {\n          return time.getTime() > Date.now();\n        }\n      },\n      rowNums: '',\n      colNums: '',\n      rowStart: '',\n      loginUser: JSON.parse(window.sessionStorage.getItem('loginUser'))\n    }\n  },\n  created() {\n    this.getSessionList()\n    this.getHallList()\n    this.getMovieList()\n    // this.curCinemaName = this.loginUser.cinemaName\n  },\n  methods: {\n    getSessionList() {\n      this.queryInfo.hallId = this.selectedHallId\n      this.queryInfo.movieId = this.selectedMovieId\n      this.queryInfo.sessionDate = this.selectedDate\n      console.log(String(this.selectedDate))\n      const _this = this;\n      axios.get('sysSession', {params: _this.queryInfo}).then(resp => {\n        console.log(resp)\n        _this.sessionList = resp.data.data;\n        _this.total = resp.data.total;\n        _this.queryInfo.pageSize = resp.data.pageSize;\n        _this.queryInfo.pageNum = resp.data.pageNum;\n      })\n    },\n    handleSizeChange(newSize) {\n      this.queryInfo.pageSize = newSize\n      this.getSessionList()\n      console.log(newSize)\n    },\n    handleCurrentChange(newPage) {\n      this.queryInfo.pageNum = newPage\n      this.getSessionList()\n      console.log(newPage)\n    },\n    showAddDialog(){\n      this.addDialogVisible = true\n    },\n    // 监听添加对话框的关闭事件\n    addDialogClosed(){\n      this.$refs.addFormRef.resetFields()\n    },\n    // 监听添加按钮\n    addSession(){\n      console.log('添加场次数据处理前')\n      console.log(this.addForm)\n      const _this = this\n      // 处理结束时间和截止时间\n      this.handleEndTimeAndDeadline(_this.addForm.movieId, _this.addForm.sessionDate, _this.addForm.playTime)\n      console.log('function添加场次的结束时间：' + _this.addForm.endTime)\n      this.$refs.addFormRef.validate(async valid => {\n        console.log(valid)\n        if (!valid) return this.$message.error('添加场次信息失败')\n        //验证通过，将登录用户的影院id赋值给表单\n\n        let seats = ''\n        let seatNums = 0\n        //查询影厅信息，查出对应排数和排座位数，填充sessionSeats字段\n        await axios.get('sysHall/' + this.addForm.hallId).then(resp => {\n          _this.rowNums = resp.data.data.rowNums\n          _this.colNums = resp.data.data.seatNumsRow\n          _this.rowStart = resp.data.data.rowStart\n          seatNums = resp.data.data.seatNums\n          seats = resp.data.data.seatState\n        })\n\n        // let row = this.rowNums\n        // let col = this.colNums\n        // let seat = {}\n        // for (let i = 0; i < row; i++) {\n        //   let arr = []\n        //   for (let j = 0; j < col; j++) {\n        //     arr.push(0)\n        //   }\n        //   seat[isNaN(parseInt(_this.rowStart)) ? String.fromCharCode(i + _this.rowStart.charCodeAt(0)) : i + parseInt(_this.rowStart)] = arr\n        // }\n        // this.$set(this.addForm, 'sessionSeats', JSON.stringify(seat))\n        //新建场次时，将影厅的座位信息赋值给场次\n        this.$set(this.addForm, 'seatNums', seatNums)\n        this.$set(this.addForm, 'sessionSeats', seats)\n        console.log(_this.addForm.sessionSeats)\n\n        // 预校验成功，发网络请求\n        axios.defaults.headers.post['Content-Type'] = 'application/json'\n        await axios.post('sysSession', JSON.stringify(_this.addForm)).then(resp => {\n          console.log(resp)\n          if (resp.data.code !== 200){\n            this.$message.error('添加场次信息失败！')\n          }\n        })\n\n        //隐藏添加对话框\n        this.addDialogVisible = false\n        //重新加载列表\n        this.getSessionList()\n        this.$message.success('添加场次信息成功！')\n      })\n    },\n    // 有订单就不能做任何修改\n    isAbleEdit(id) {\n      this.checkAbleId.sessionId = id\n      axios.get('sysBill', {params: this.checkAbleId}).then(response => {\n        console.log(response.data.total)\n        console.log('data')\n        console.log(response.data)\n        console.log('data.data')\n        console.log(response.data.data)\n        console.log(response.data.data.length)\n        let bills = response.data.data\n        if (response.data.total === 0) {\n          console.log('空的可改')\n          this.showEditDialog(id)\n        } else {\n          console.log('修改前判断有场次相关')\n          let billIds = ''\n          for (let temp of bills) {\n            billIds += temp.billId+' '\n          }\n          console.log('billIds is : '+billIds)\n          this.$alert('抱歉！电影场次有相关订单，不能修改电影场次信息。\\n'+'导致异常的订单编号为: '+billIds, '修改请求异常通知', {\n            confirmButtonText: '我知道了',\n            callback: action => {\n              this.$router.push('/session')\n            }\n          })\n        }\n      })\n    },\n    // 显示修改对话框，回显数据\n    async showEditDialog(id){\n      const _this = this\n      const { data : res} = await axios.get('sysSession/find/' + id)\n      this.editForm = res.data\n      this.editDialogVisible = true\n    },\n    // 监听修改对话框的关闭事件\n    editDialogClosed(){\n      this.$refs.editFormRef.resetFields()\n    },\n    // 修改场次信息并提交\n    editSessionInfo(){\n      this.handleEndTimeAndDeadline(this.editForm.movieId, this.editForm.sessionDate, this.editForm.playTime)\n      let row = this.editForm.rowNums\n      let col = this.editForm.seatNumsRow\n      this.$set(this.editForm, 'seatNums', row * col)\n      let seat = {}\n      for (let i = 0; i < row; i++) {\n        let arr = []\n        for (let j = 0; j < col; j++) {\n          arr.push(0)\n        }\n        seat[isNaN(parseInt(this.editForm.rowStart)) ? String.fromCharCode(i + this.editForm.rowStart.charCodeAt(0)) : i + parseInt(this.editForm.rowStart)] = arr\n      }\n      this.$set(this.editForm, 'seatState', JSON.stringify(seat))\n\n      this.$refs.editFormRef.validate(async valid => {\n        const _this = this\n        if (!valid) return\n        let success = true\n        axios.defaults.headers.put['Content-Type'] = 'application/json'\n        await axios.put('sysSession', JSON.stringify(_this.editForm)).then(resp => {\n          if (resp.data.code !== 200){\n            this.$message.error('修改场次信息失败！')\n            success = false\n          }\n        })\n        if (!success) return\n        this.editDialogVisible = false\n        this.getSessionList()\n        this.$message.success('修改场次信息成功！')\n      })\n    },\n    //处理散场时间和片场截止时间（修改或删除电影、影厅信息截止时间修改或删除电影、影厅信息截止时间）\n    handleEndTimeAndDeadline(movieId, sessionDate, playTime){\n      this.addForm.deadline = ''\n      this.editForm.deadline = ''\n      this.addForm.endTime = ''\n      this.editForm.endTime = ''\n      let resultEndTime = ''\n      //电影时长\n      let movieLengthTime\n      for (let item of this.movieList) {\n        if (item.movieId === movieId) {\n          movieLengthTime = item.movieLength\n          break\n        }\n      }\n      //临时时间，用于记录开播时间，使用moment工具\n      let tempTime = new Date(sessionDate)\n      //分离开播时间\n      let hoursMin = playTime.split(':')\n      tempTime.setHours(hoursMin[0])\n      tempTime.setMinutes(hoursMin[1])\n      tempTime.setSeconds(0)\n      let tempEndTime = moment(tempTime).add(movieLengthTime,'m')._d\n      // 片场结束时间再加20分钟\n      let tempDeadline = moment(moment(tempEndTime).add(20,'m')._d).format('YYYY-MM-DD HH:mm:ss')\n\n      // 设置deadline\n      this.addForm.deadline = tempDeadline\n      this.editForm.deadline = tempDeadline\n      console.log('修改后时间'+tempEndTime);\n      let endHours = tempEndTime.getHours()\n      let endMins = tempEndTime.getMinutes()\n      //时间格式化\n      if (endHours < 10) {\n        resultEndTime = '0'+endHours+':'\n      } else {\n        resultEndTime = endHours+':'\n      }\n      if (endMins < 10) {\n        resultEndTime += '0'+endMins\n      } else {\n        resultEndTime += endMins\n      }\n      console.log('添加场次的结束时间：' + resultEndTime)\n      // return resultEndTime\n      this.addForm.endTime = resultEndTime\n      this.editForm.endTime = resultEndTime\n    },\n    // 监听多选框变化\n    handleSelectionChange(val){\n      this.multipleSelection = val\n    },\n    // 批量删除前校验\n    async isAbleMultipleDelete() {\n      let ableMultipleDelete = true\n      let ids = ''\n      for (let i = 0; i < this.multipleSelection.length; i++) {\n        this.checkAbleId.sessionId = this.multipleSelection[i].sessionId\n\n        console.log('sessionid' + this.checkAbleId.sessionId)\n        // 每条数据都进行时间校验\n        // const { data : resp } = await axios.get('sysSession', {params: this.checkAbleId})\n        const { data : resp } = await axios.get('sysSession/find/' + this.checkAbleId.sessionId)\n        console.log('获取的场次信息')\n        console.log(resp.data)\n        let curSessionInfo = resp.data\n        // 如果当前场次已完成，不操作\n        if (curSessionInfo.deadline <= moment(new Date()).format('YYYY-MM-DD HH:mm:ss')) continue\n\n        const { data : res } = await axios.get('sysBill', {params: this.checkAbleId})\n        if (res.data.length !== 0) {\n          ids += this.multipleSelection[i].sessionId + ' '\n          ableMultipleDelete = false\n        }\n      }\n      if (ableMultipleDelete === false) {\n        // '抱歉！。\\\\n\\'+\\'导致异常的订单编号为: \\''\n        this.$alert('抱歉！电影场次有相关订单，不能删除电影场次信息。\\n' + '导致异常的场次编号为: ' + ids, '批量删除请求异常通知', {\n          confirmButtonText: '我知道了',\n          callback: action => {\n            this.$router.push('/session')\n          }\n        })\n        return\n      }\n      await this.multipleDelete()\n    },\n    async multipleDelete(){\n      const _this = this\n      //询问用户是否确认删除\n      const resp = await this.$confirm('此操作将永久删除这些条目, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).catch(err => err)\n\n      // 用户确认删除, resp为字符串\"confirm\"\n      // 用户取消删除，resp为字符串\"cancel\"\n      if (resp === 'cancel'){\n        return _this.$message.info('已取消删除')\n      }\n\n      let ids = []\n      this.multipleSelection.forEach(data => {\n        ids.push(data.sessionId)\n      })\n      console.log(ids)\n      await axios.delete('sysSession/' + ids).then(resp => {\n        if (resp.data.code !== 200){\n          this.$message.success('批量删除场次失败！')\n        }\n      })\n      this.getSessionList()\n      this.$message.success('批量删除场次成功！')\n    },\n    // 两层检验，第一层检验场次是否完成，完成则可删；第二层检验未完成，是否有订单，有订单不可删。不论订单支付与否\n    async isAbleDelete(session) {\n      if (session.deadline <= moment(new Date()).format('YYYY-MM-DD HH:mm:ss')) {\n        await this.deleteSessionById(session.sessionId)\n        return\n      }\n      this.checkAbleId.sessionId = session.sessionId\n      axios.get('sysBill', {params: this.checkAbleId}).then(response => {\n        console.log(response.data.total)\n        let bills = response.data.data\n        if (response.data.total === 0) {\n          console.log('空的可改')\n          this.deleteSessionById(session.sessionId)\n        } else {\n          console.log('删除前判断有场次相关')\n          let billIds = ''\n          for (let temp of bills) {\n            console.log(temp)\n            billIds += temp.billId+' '\n          }\n          console.log('billIds is : '+billIds)\n          this.$alert('抱歉！电影场次有相关订单，不能删除电影场次信息。\\n'+'导致异常的订单编号为: '+billIds, '删除请求异常通知', {\n            confirmButtonText: '我知道了',\n            callback: action => {\n              this.$router.push('/session')\n            }\n          })\n        }\n      })\n    },\n    //根据id删除对应的影厅分类\n    async deleteSessionById(id){\n      const _this = this\n      //询问用户是否确认删除\n      const resp = await this.$confirm('此操作将永久删除该条目, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).catch(err => err)\n\n      // 用户确认删除, resp为字符串\"confirm\"\n      // 用户取消删除，resp为字符串\"cancel\"\n      console.log(resp)\n      if (resp === 'cancel'){\n        return _this.$message.info('已取消删除')\n      }\n\n      await axios.delete('sysSession/' + id).then(resp => {\n        if (resp.data.code !== 200){\n          _this.$message.success('删除场次信息失败！')\n        }\n      })\n      this.getSessionList()\n      this.$message.success('删除场次信息成功！')\n    },\n    getHallList(){\n      const _this = this\n      axios.get('sysHall').then(resp => {\n        _this.hallList = resp.data.data;\n      })\n    },\n    getMovieList(){\n      const _this = this\n      axios.get('sysMovie/find').then(resp => {\n        _this.movieList = resp.data.data;\n      })\n    },\n    async checkSeat(id){\n      const _this = this\n      await axios.get('sysSession/find/' + id).then(resp => {\n        console.log(resp)\n        _this.seats = JSON.parse(resp.data.data.sessionSeats)\n        _this.col = resp.data.data.sysHall.seatNumsRow\n      })\n      console.log(this.col)\n      this.checkDialogWidth = 200 + this.col * 40 + 'px'\n      this.checkDialogVisible = true\n    }\n  }\n}\n</script>\n\n<style scoped>\n.row{\n  white-space: nowrap;\n  margin-top: 10px;\n  padding: 0 10px;\n  text-align: center;\n  display: flex;\n  justify-content: space-between;\n}\n.seat{\n  display: inline-block;\n  width: 30px;\n  height: 26px;\n  margin: 0 5px;\n  background-position: 0 1px;\n}\n.seat-default {\n  background: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAHKSURBVEhLxZfbysIwDMezKeJUVAR9A/H9X0FQZMOLeem14sWc4AnP9muybM4557eT/mCYdLT/tknaqQgJ/ACVf7/Oz4TfbvVisYDlcgm1Wg2SRON0OoGqqtDr9bglAAoHGY1GQgqzl5zz+SyGwyF7z7wITyYTtrJD13W2HrzEuFqtspUdnU4Hbrcbew5fSa5SqfQbYbmzoCgKew5fK6disciWgyd8vV5hPB5DoVAA27bpSct6vQbLsmjFhmFwK0MpJjFNky2H3W4nZEf24rPZbMTlcmFPiPv9LgaDAXu+rNY0jS0HzG5Zh+zFRwo9bS/GuNvtgpwM+SQsVwetVosa/GDnpMhFsfUAJ3I4HMgmYRQIZl1awsbzTyYyqzHRkhK2Yj+RwklwBYMHRpDMhd0tTrXiT52jwCsxCrqPZc3RARLM7O1266V/XMrlMlQqFfYcVqsVZXa9Xo8Wzhq/cOYx/i+e8KeYZIFfgyyMxWw2o4Y8mc/nXty9jz08NqfTKTSbTapBLAt8kh6buDocGh+3xNrtNjQaDbLxRSj7/f7pNolLv98Xx+ORvVfeBla+S3VJ4K7hGO/I7S8MDht2UbjklspRokj+NRQKwB/pWISi3oSUQQAAAABJRU5ErkJggg==\") no-repeat;\n}\n.seat-choose{\n  background: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAKVSURBVEhLxZXPThpRFMY/hhFBG4okbdiYxgXpxmJi0phi4sKlL+HWlSsfwMSFr+DKjSufwMSFiyakaaagQaOxW1txUUjDHwVh5vacmdtxgGEsA1N/yYHLvdzzzT33nDMhQeAFUOT3f+fFhAeGutRs4tfpKV5dXECoqpz9R8hlKxqFsrqK96mUnOzGVfhrsYh3+/tIXV8Dk5Nydkh0HW3a+21zE59WVuTkE33C5/k8PmxvW4ITE/SPkFzxQacDUOS0nR18XFiQkxZ9dzx9dARwaCOR0UQZ9kP29vAQupz6S39y8UmVMeZcOIwInfp54QAQdJDe2LkLt9tAq2Vmp294L/vhe6Zxb13YwrSMvKZRZMIoLy2hvLYG3N/7E+c9FN7f2SzK8/MQiQS0szO5aGFndfHkBJndXSAeNzc2ZmehUw3GCwUru4eBTlpbXETs6grqwwNgGBBkX7a2kF1eNv9inziWy1minFxU/NM3N2jHYr5PbJAPtdGwHpp8hiiS6YMDUPBNTOE6WfL21sxAGx7Xav5KivaIx0fy7kghGqv0QHR+6yd/GGQUcx52M0Idu+0UDn+ORxovLp24i8CEO9SrvQhM+LlL8hQWnJHcBHxYiKvDA7OOqzTobGwgWalYjZ2hjlObm0N7Zmb4kqIkipZKmLq7e6oU8ldJJqHu7YGK1kOYke3OF1xKzvLsEfa+Y34IDrcfc4q6YAsrfDcBozgy3RSeIvuRyVidinsrNfixW7WKn+m0qcXYLwlum9+Pj5G4vITO709KEDaDmrsfFPLBrtnMrkhvqDfr63gt13nBlYZhiFyhIH8Nz2dNE005dmNgcgl6Fxv8dvGJXq9DcIgHYId63LBbvqpBeJfTCHiJMoEJewP8Afy6sw903o8jAAAAAElFTkSuQmCC\") no-repeat;\n}\n.seat-sold{\n  background: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAANwSURBVEhLxZZLTBNRFIb/mWlpjbWAYgISNBofGyMGwQdEg0sTdaciaNy40UTxmeiKuDPGxwZXsjAuDNHohmhcYARjjGJBoYSFhAUYA+EpSksfQ8dz7gwwbacj5SEfXMq9c+757z3n3DuVNALLgGx8/neWTThlqIMjgL+3Gd3B11AklzE6NzTEkKFloTT/LNZtzDJG47EUbm/twouhk+hTOpAhGYNpMkXNSX+qPO+wv6xcHzSRJNzW/hm1A3vhcgD0C2mewswUeQ6T+IUcPwqLthujOkk5bh68AycpOklwIaKMQvMdCvBqsNoYmSVJOENeiQXqxcECEYzrHRP/paplKVnGUlil3ERiVJ2W9Z4atg9Gab4xN0qfXGRWB2dWmJ598bVAURzY4T6CA9mXEUpDnO1GQ8D5nfXYlFmMICkWeSux2XEQ3ow8fPX5DUudmapuamlA3dhReKiweCTXsRVrXdvQFWyAYw5JH54ErhY/pfqQ8aCtAnuyD6Mn0IgQ/bBAjBZyxvMBZaVlwn5mx22jT4Qon1sXjQ6o3+GWssWkKE0KUAitds9jLHqtuF707/oq4HGyDy8mtZA4HexToepuGD8tbBhdOAIMSa1xCeejMBEZFvkqyTuGm7ubMEKhNIvz/xxe3qlG2bzvq8Qat34MI1NBKirDkBC+ZRW0FoGuxbmkiSY7gUTV6CSL9z+e4+dEB2r2NYrdTYvzQq4Y4b3nq8JqQ5SRLC8Baea5LmxlY8JLV/Uj/0X0Bzpxq6xRCCaGN2fFrChjVclmzNG1hXdT57+E/okuXC95hnOFtXHhTURVqShssBVOXDWL885/h/vhdmSRaHx44/hHFG2FnbJbXCbmxmF/3FWNh+2nkEmifEEk2nBzKR5xIlKhn+MwcKNpA/44+kQ1M/xmyXfuglcpIAdUfWkgQ8Gg2olhtTvO3yp1PW6X99KqbIQZNrZbtR3sJtGXWdg21DyRb635NLOoFUKYa0ilq22piSE6cwcIYYmKZAuOI0CpDHOjh4vdJshvQeyQ0BKaIseERnl+2/oSPeE3kDWnuHm4xWLpFdY0siyL4yga7dXrysWJohpIdNEIWNiKqZCmtX7yG730afn4TdOiRseClMU1qQbopf7L6KVPIDyGkJq6bpK+ZS4W7Nb6RaFje5wWgp0os2TC9gB/AXsuAMA34noyAAAAAElFTkSuQmCC\") no-repeat;\n}\n</style>\n"]}]}
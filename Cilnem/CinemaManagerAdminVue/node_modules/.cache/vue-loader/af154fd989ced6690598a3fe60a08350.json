{"remainingRequest":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerAdminVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerAdminVue\\src\\views\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerAdminVue\\src\\views\\Login.vue","mtime":1651665518000},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerAdminVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1688267736415},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerAdminVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1688267739465},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerAdminVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1688267736415},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerAdminVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1688267740672}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTG9naW4iLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvL+eZu+W9leihqOWNleaVsOaNruWvueixoQogICAgICBsb2dpbkZvcm06IHsKICAgICAgICB1c2VyTmFtZTogJ2FkbWluJywKICAgICAgICBwYXNzd29yZDogJzEyMzQ1NicKICAgICAgfSwKICAgICAgLy/ooajljZXpqozor4Hop4TliJkKICAgICAgbG9naW5Gb3JtUnVsZXM6IHsKICAgICAgICAvL+mqjOivgeeUqOaIt+WQjQogICAgICAgIHVzZXJOYW1lOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36L6T5YWl55So5oi35ZCN56ewIiwgdHJpZ2dlcjogImJsdXIifSwKICAgICAgICAgIHsgbWluOjIsIG1heDogMjAsIG1lc3NhZ2U6ICLplb/luqblnKgy5YiwMjDkuKrlrZfnrKbkuYvpl7QiLCB0cmlnZ2VyOiAiYmx1ciJ9CiAgICAgICAgXSwKICAgICAgICAvL+mqjOivgeWvhueggQogICAgICAgIHBhc3N3b3JkOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36L6T5YWl5a+G56CBIiwgdHJpZ2dlcjogImJsdXIifSwKICAgICAgICAgIHsgbWluOjYsIG1heDogMTYsIG1lc3NhZ2U6ICLplb/luqblnKg25YiwMTbkuKrlrZfnrKbkuYvpl7QiLCB0cmlnZ2VyOiAiYmx1ciJ9CiAgICAgICAgXQogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOnsKICAgIHN1Y2Nlc3MocGFyYW1zKSB7CiAgICAgIGNvbnNvbGUubG9nKHBhcmFtcyk7CiAgICAgIHRoaXMubG9naW4oKQogICAgfSwKICAgIC8v54K55Ye76YeN572u5oyJ6ZKu77yM6YeN572u6KGo5Y2VCiAgICByZXNldExvZ2luRm9ybSgpewogICAgICBjb25zb2xlLmxvZyh0aGlzLiRyZWZzKQogICAgICB0aGlzLiRyZWZzLmxvZ2luRm9ybVJlZi5yZXNldEZpZWxkcygpOwogICAgfSwKICAgIGxvZ2luKCkgewogICAgICB0aGlzLiRyZWZzLmxvZ2luRm9ybVJlZi52YWxpZGF0ZShhc3luYyB2YWxpZCA9PiB7CiAgICAgICAgaWYoIXZhbGlkKSByZXR1cm47CiAgICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5wb3N0WydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgIGNvbnN0IHsgZGF0YTogcmVzfSA9IGF3YWl0IGF4aW9zLnBvc3QoJ3N5c1VzZXIvbG9naW4nLCBKU09OLnN0cmluZ2lmeSh0aGlzLmxvZ2luRm9ybSkpOwogICAgICAgIGlmKHJlcy5jb2RlICE9PSAyMDApIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgIC8v5o6n5Yi255m75b2V5p2D6ZmQCiAgICAgICAgaWYocmVzLmRhdGEuc3lzVXNlci5zeXNSb2xlLmNoaWxkcmVuID09PSBudWxsIHx8IHJlcy5kYXRhLnN5c1VzZXIuc3lzUm9sZS5jaGlsZHJlblswXSA9PT0gbnVsbCkgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5oqx5q2J77yM5oKo5rKh5pyJ5p2D6ZmQ55m75b2V77yM6K+36IGU57O7566h55CG5ZGY6I635Y+W5p2D6ZmQIikKICAgICAgICAgIHJldHVybgogICAgICAgIH0KICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIueZu+W9leaIkOWKnyIpCiAgICAgICAgLy8gY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgIC8v5L+d5a2YdG9rZW4KICAgICAgICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgidG9rZW4iLCByZXMuZGF0YS50b2tlbikKICAgICAgICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgibG9naW5Vc2VyIiwgSlNPTi5zdHJpbmdpZnkoe3N5c1VzZXIgOiByZXMuZGF0YS5zeXNVc2VyLCBjaW5lbWFJZCA6IHJlcy5kYXRhLmNpbmVtYUlkLCBjaW5lbWFOYW1lIDogcmVzLmRhdGEuY2luZW1hTmFtZX0pKTsKICAgICAgICAvLyB3aW5kb3cuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgiYnRuUGVybWlzc2lvbiIsIHJlcy5kYXRhLnN5c1VzZXIuc3lzUm9sZS5yb2xlSWQgPT09IDEgPyAiYWRtaW4iIDogIm5vcm1hbCIpCiAgICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oImJ0blBlcm1pc3Npb24iLCByZXMuZGF0YS5zeXNVc2VyLnN5c1JvbGUucm9sZUlkID09PSAxID8gImFkbWluIiA6ICJhZG1pbiIpCiAgICAgICAgLy/lr7zoiKrot7PovazliLDpppbpobUKICAgICAgICBhd2FpdCB0aGlzLiRyb3V0ZXIucHVzaCgnL3dlbGNvbWUnKTsKICAgICAgfSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";AA6BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"login_container\">\n    <div class=\"login_box\">\n      <div class=\"title_box\">\n        <p>影院管理登录</p>\n      </div>\n      <!-- 登录表单区域 -->\n      <el-form class=\"login_form\" :model=\"loginForm\" :rules=\"loginFormRules\" ref=\"loginFormRef\">\n        <!-- 用户名 -->\n        <el-form-item prop=\"userName\">\n          <el-input v-model=\"loginForm.userName\" placeholder=\"请输入用户名\" clearable\n                    prefix-icon=\"iconfont icon-user\"></el-input>\n        </el-form-item>\n        <!-- 密码 -->\n        <el-form-item prop=\"password\">\n          <el-input v-model=\"loginForm.password\" type=\"password\" placeholder=\"请输入密码\" show-password\n                    prefix-icon=\"iconfont icon-lock\"></el-input>\n        </el-form-item>\n        <!-- 按扭区域 -->\n        <el-form-item class=\"btns\">\n          <el-button size=\"medium\" :round=\"true\" type=\"primary\" @click=\"login\">点击登录</el-button>\n          <el-button size=\"medium\" :round=\"true\" type=\"info\" @click=\"resetLoginForm\">恢复默认</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Login\",\n  data() {\n    return {\n      //登录表单数据对象\n      loginForm: {\n        userName: 'admin',\n        password: '123456'\n      },\n      //表单验证规则\n      loginFormRules: {\n        //验证用户名\n        userName: [\n          { required: true, message: \"请输入用户名称\", trigger: \"blur\"},\n          { min:2, max: 20, message: \"长度在2到20个字符之间\", trigger: \"blur\"}\n        ],\n        //验证密码\n        password: [\n          { required: true, message: \"请输入密码\", trigger: \"blur\"},\n          { min:6, max: 16, message: \"长度在6到16个字符之间\", trigger: \"blur\"}\n        ]\n      }\n    }\n  },\n  methods:{\n    success(params) {\n      console.log(params);\n      this.login()\n    },\n    //点击重置按钮，重置表单\n    resetLoginForm(){\n      console.log(this.$refs)\n      this.$refs.loginFormRef.resetFields();\n    },\n    login() {\n      this.$refs.loginFormRef.validate(async valid => {\n        if(!valid) return;\n        axios.defaults.headers.post['Content-Type'] = 'application/json'\n        const { data: res} = await axios.post('sysUser/login', JSON.stringify(this.loginForm));\n        if(res.code !== 200) return this.$message.error(res.msg);\n        //控制登录权限\n        if(res.data.sysUser.sysRole.children === null || res.data.sysUser.sysRole.children[0] === null) {\n          this.$message.error(\"抱歉，您没有权限登录，请联系管理员获取权限\")\n          return\n        }\n        this.$message.success(\"登录成功\")\n        // console.log(res.data);\n        //保存token\n        window.sessionStorage.setItem(\"token\", res.data.token)\n        window.sessionStorage.setItem(\"loginUser\", JSON.stringify({sysUser : res.data.sysUser, cinemaId : res.data.cinemaId, cinemaName : res.data.cinemaName}));\n        // window.sessionStorage.setItem(\"btnPermission\", res.data.sysUser.sysRole.roleId === 1 ? \"admin\" : \"normal\")\n        window.sessionStorage.setItem(\"btnPermission\", res.data.sysUser.sysRole.roleId === 1 ? \"admin\" : \"admin\")\n        //导航跳转到首页\n        await this.$router.push('/welcome');\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.login_container{\n  background-image: url(\"../assets/login-background.jpg\");\n  height: 100%;\n}\n\n.login_box{\n  width: 450px;\n  height: 300px;\n  background-color: #fff;\n  border-radius: 3px;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n}\n\n.avatar_box{\n  height: 130px;\n  width: 130px;\n  border: 1px solid #eee;\n  border-radius: 50%;\n  padding: 10px;\n  box-shadow: 0 0 10px #ddd;\n  position: absolute;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background-color: #fff;\n}\n\n.avatar_box > img{\n  width: 100%;\n  height: 100%;\n  border-radius: 50%;\n  background-color: #eee;\n}\n\n.title_box{\n  text-align: center;\n  font-size: 200%;\n}\n\n.login_form{\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  padding: 0 20px;\n  box-sizing: border-box;\n}\n\n.btns{\n  display: flex;\n  justify-content: center;\n}\n</style>\n"]}]}
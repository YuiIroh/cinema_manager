{"remainingRequest":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerAdminVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerAdminVue\\src\\views\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerAdminVue\\src\\views\\Login.vue","mtime":1688784872929},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerAdminVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1688267736415},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerAdminVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1688267739465},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerAdminVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1688267736415},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerAdminVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1688267740672}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTG9naW4iLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvL+eZu+W9leihqOWNleaVsOaNruWvueixoQogICAgICBsb2dpbkZvcm06IHsKICAgICAgICB1c2VyTmFtZTogJycsCiAgICAgICAgcGFzc3dvcmQ6ICcnCiAgICAgIH0sCiAgICAgIC8v6KGo5Y2V6aqM6K+B6KeE5YiZCiAgICAgIGxvZ2luRm9ybVJ1bGVzOiB7CiAgICAgICAgLy/pqozor4HnlKjmiLflkI0KICAgICAgICB1c2VyTmFtZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpeeUqOaIt+WQjeensCIsIHRyaWdnZXI6ICJibHVyIn0sCiAgICAgICAgICB7IG1pbjoyLCBtYXg6IDIwLCBtZXNzYWdlOiAi6ZW/5bqm5ZyoMuWIsDIw5Liq5a2X56ym5LmL6Ze0IiwgdHJpZ2dlcjogImJsdXIifQogICAgICAgIF0sCiAgICAgICAgLy/pqozor4Hlr4bnoIEKICAgICAgICBwYXNzd29yZDogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpeWvhueggSIsIHRyaWdnZXI6ICJibHVyIn0sCiAgICAgICAgICB7IG1pbjo2LCBtYXg6IDE2LCBtZXNzYWdlOiAi6ZW/5bqm5ZyoNuWIsDE25Liq5a2X56ym5LmL6Ze0IiwgdHJpZ2dlcjogImJsdXIifQogICAgICAgIF0KICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczp7CiAgICBzdWNjZXNzKHBhcmFtcykgewogICAgICBjb25zb2xlLmxvZyhwYXJhbXMpOwogICAgICB0aGlzLmxvZ2luKCkKICAgIH0sCiAgICBsb2dpbigpIHsKICAgICAgdGhpcy4kcmVmcy5sb2dpbkZvcm1SZWYudmFsaWRhdGUoYXN5bmMgdmFsaWQgPT4gewogICAgICAgIGlmKCF2YWxpZCkgcmV0dXJuOwogICAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMucG9zdFsnQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbicKICAgICAgICBjb25zdCB7IGRhdGE6IHJlc30gPSBhd2FpdCBheGlvcy5wb3N0KCdzeXNVc2VyL2xvZ2luJywgSlNPTi5zdHJpbmdpZnkodGhpcy5sb2dpbkZvcm0pKTsKICAgICAgICBpZihyZXMuY29kZSAhPT0gMjAwKSByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICAvL+aOp+WItueZu+W9leadg+mZkAogICAgICAgIGlmKHJlcy5kYXRhLnN5c1VzZXIuc3lzUm9sZS5jaGlsZHJlbiA9PT0gbnVsbCB8fCByZXMuZGF0YS5zeXNVc2VyLnN5c1JvbGUuY2hpbGRyZW5bMF0gPT09IG51bGwpIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuaKseatie+8jOaCqOayoeacieadg+mZkOeZu+W9le+8jOivt+iBlOezu+euoeeQhuWRmOiOt+WPluadg+mZkCIpCiAgICAgICAgICByZXR1cm4KICAgICAgICB9CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLnmbvlvZXmiJDlip8iKQogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICAvL+S/neWtmHRva2VuCiAgICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oInRva2VuIiwgcmVzLmRhdGEudG9rZW4pCiAgICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oImxvZ2luVXNlciIsIEpTT04uc3RyaW5naWZ5KHtzeXNVc2VyIDogcmVzLmRhdGEuc3lzVXNlciwgY2luZW1hSWQgOiByZXMuZGF0YS5jaW5lbWFJZCwgY2luZW1hTmFtZSA6IHJlcy5kYXRhLmNpbmVtYU5hbWV9KSk7CiAgICAgICAgLy8gd2luZG93LnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oImJ0blBlcm1pc3Npb24iLCByZXMuZGF0YS5zeXNVc2VyLnN5c1JvbGUucm9sZUlkID09PSAxID8gImFkbWluIiA6ICJub3JtYWwiKQogICAgICAgIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJidG5QZXJtaXNzaW9uIiwgcmVzLmRhdGEuc3lzVXNlci5zeXNSb2xlLnJvbGVJZCA9PT0gMSA/ICJhZG1pbiIgOiAiYWRtaW4iKQogICAgICAgIC8v5a+86Iiq6Lez6L2s5Yiw6aaW6aG1CiAgICAgICAgYXdhaXQgdGhpcy4kcm91dGVyLnB1c2goJy93ZWxjb21lJyk7CiAgICAgIH0pCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";AA4BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"login_container\">\n    <div class=\"login_box\">\n      <div class=\"title_box\">\n        <p>影院后台管理</p>\n      </div>\n      <!-- 登录表单区域 -->\n      <el-form class=\"login_form\" :model=\"loginForm\" :rules=\"loginFormRules\" ref=\"loginFormRef\">\n        <!-- 用户名 -->\n        <el-form-item prop=\"userName\">\n          <el-input v-model=\"loginForm.userName\" placeholder=\"请输入用户名\" clearable\n                    prefix-icon=\"iconfont icon-user\"></el-input>\n        </el-form-item>\n        <!-- 密码 -->\n        <el-form-item prop=\"password\">\n          <el-input v-model=\"loginForm.password\" type=\"password\" placeholder=\"请输入密码\" show-password\n                    prefix-icon=\"iconfont icon-lock\"></el-input>\n        </el-form-item>\n        <!-- 按扭区域 -->\n        <el-form-item class=\"btns\">\n          <el-button size=\"medium\" :round=\"true\" type=\"primary\" @click=\"login\">点击登录</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Login\",\n  data() {\n    return {\n      //登录表单数据对象\n      loginForm: {\n        userName: '',\n        password: ''\n      },\n      //表单验证规则\n      loginFormRules: {\n        //验证用户名\n        userName: [\n          { required: true, message: \"请输入用户名称\", trigger: \"blur\"},\n          { min:2, max: 20, message: \"长度在2到20个字符之间\", trigger: \"blur\"}\n        ],\n        //验证密码\n        password: [\n          { required: true, message: \"请输入密码\", trigger: \"blur\"},\n          { min:6, max: 16, message: \"长度在6到16个字符之间\", trigger: \"blur\"}\n        ]\n      }\n    }\n  },\n  methods:{\n    success(params) {\n      console.log(params);\n      this.login()\n    },\n    login() {\n      this.$refs.loginFormRef.validate(async valid => {\n        if(!valid) return;\n        axios.defaults.headers.post['Content-Type'] = 'application/json'\n        const { data: res} = await axios.post('sysUser/login', JSON.stringify(this.loginForm));\n        if(res.code !== 200) return this.$message.error(res.msg);\n        //控制登录权限\n        if(res.data.sysUser.sysRole.children === null || res.data.sysUser.sysRole.children[0] === null) {\n          this.$message.error(\"抱歉，您没有权限登录，请联系管理员获取权限\")\n          return\n        }\n        this.$message.success(\"登录成功\")\n        // console.log(res.data);\n        //保存token\n        window.sessionStorage.setItem(\"token\", res.data.token)\n        window.sessionStorage.setItem(\"loginUser\", JSON.stringify({sysUser : res.data.sysUser, cinemaId : res.data.cinemaId, cinemaName : res.data.cinemaName}));\n        // window.sessionStorage.setItem(\"btnPermission\", res.data.sysUser.sysRole.roleId === 1 ? \"admin\" : \"normal\")\n        window.sessionStorage.setItem(\"btnPermission\", res.data.sysUser.sysRole.roleId === 1 ? \"admin\" : \"admin\")\n        //导航跳转到首页\n        await this.$router.push('/welcome');\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.login_container{\n  height: 100%;\n}\n\n.login_box{\n  width: 450px;\n  height: 300px;\n  background-color: #fff;\n  border-radius: 3px;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  border: 1px solid grey;\n}\n\n.avatar_box{\n  height: 130px;\n  width: 130px;\n  border: 1px solid #eee;\n  border-radius: 50%;\n  padding: 10px;\n  box-shadow: 0 0 10px #ddd;\n  position: absolute;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background-color: #fff;\n}\n\n.avatar_box > img{\n  width: 100%;\n  height: 100%;\n  border-radius: 50%;\n  background-color: #eee;\n}\n\n.title_box{\n  text-align: center;\n  font-size: 200%;\n}\n\n.login_form{\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  padding: 0 20px;\n  box-sizing: border-box;\n}\n\n.btns{\n  display: flex;\n  justify-content: center;\n}\n</style>\n"]}]}
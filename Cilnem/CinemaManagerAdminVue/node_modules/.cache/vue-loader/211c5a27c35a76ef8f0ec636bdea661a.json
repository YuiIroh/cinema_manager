{"remainingRequest":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerAdminVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerAdminVue\\src\\views\\bill\\BillInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerAdminVue\\src\\views\\bill\\BillInfo.vue","mtime":1696216054817},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerAdminVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1688267736415},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerAdminVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1688267739465},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerAdminVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1688267736415},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerAdminVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1688267740672}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBnbG9iYWwgZnJvbSAiQC9hc3NldHMvY3NzL2dsb2JhbC5jc3MiCmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImJpbGxJbmZvIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcXVlcnlJbmZvOiB7CiAgICAgICAgcXVlcnlCeVVzZXJOYW1lOiAnJywKICAgICAgICBwYXlTdGF0ZTogJycsCiAgICAgICAgY3JlYXRlVGltZTogJycsCiAgICAgICAgcGFnZU51bTogMSwKICAgICAgICBwYWdlU2l6ZTogNwogICAgICB9LAogICAgICBiaWxsTGlzdDogW10sCiAgICAgIHRvdGFsOiAwLAogICAgICBtdWx0aXBsZVNlbGVjdGlvbjogW10sCiAgICAgIGlucHV0VXNlck5hbWU6ICcnLAogICAgICBzZWxlY3RlZFN0YXRlOiAnJywKICAgICAgc2VsZWN0ZWREYXRlOiAnJywKICAgICAgZWRpdERpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBlZGl0Rm9ybTogewogICAgICAgIHN5c1VzZXI6IHsKICAgICAgICAgIHVzZXJOYW1lOiAnJwogICAgICAgIH0sCiAgICAgICAgc3lzU2Vzc2lvbjogewogICAgICAgICAgc3lzTW92aWU6IHt9LAogICAgICAgICAgc3lzSGFsbDoge30KICAgICAgICB9CiAgICAgIH0sCiAgICAgIHBheVN0YXRlczogWwogICAgICAgIHsKICAgICAgICAgIGlkOiAwLAogICAgICAgICAgbmFtZTogJ+acquaUr+S7mCcKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGlkOiAxLAogICAgICAgICAgbmFtZTogJ+W3suWujOaIkCcKICAgICAgICB9CiAgICAgIF0sCiAgICAgIGNhbmNlbFN0YXRlczogWwogICAgICAgIHsKICAgICAgICAgIGlkOiAwLAogICAgICAgICAgbmFtZTogJ+acquWPlua2iCcKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGlkOiAxLAogICAgICAgICAgbmFtZTogJ+W3suWPlua2iCcKICAgICAgICB9CiAgICAgIF0sCiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRCaWxsTGlzdCgpCiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBnZXRCaWxsTGlzdCgpIHsKICAgICAgLy8gdGhpcy51c2VyTmFtZSA9IHRoaXMuaW5wdXRVc2VyTmFtZQogICAgICB0aGlzLnF1ZXJ5SW5mby5wYXlTdGF0ZSA9IHRoaXMuc2VsZWN0ZWRTdGF0ZQogICAgICB0aGlzLnF1ZXJ5SW5mby5jcmVhdGVUaW1lID0gdGhpcy5zZWxlY3RlZERhdGUKICAgICAgY29uc29sZS5sb2coJ3F1YXJ5SW5mbycrdGhpcy5pbnB1dFVzZXJOYW1lKQogICAgICB0aGlzLnF1ZXJ5SW5mby5xdWVyeUJ5VXNlck5hbWUgPSB0aGlzLmlucHV0VXNlck5hbWUKICAgICAgY29uc29sZS5sb2coJ3N5c1VzZXIudXNlck5hbWUnKQogICAgICBjb25zb2xlLmxvZyh0aGlzLnF1ZXJ5SW5mby5xdWVyeUJ5VXNlck5hbWUpCiAgICAgIGNvbnN0IF90aGlzID0gdGhpczsKICAgICAgYXdhaXQgYXhpb3MuZ2V0KCdzeXNCaWxsJywge3BhcmFtczogX3RoaXMucXVlcnlJbmZvfSkudGhlbihyZXNwID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwKQogICAgICAgIF90aGlzLmJpbGxMaXN0ID0gcmVzcC5kYXRhLmRhdGE7CiAgICAgICAgX3RoaXMudG90YWwgPSByZXNwLmRhdGEudG90YWw7CiAgICAgICAgX3RoaXMucXVlcnlJbmZvLnBhZ2VTaXplID0gcmVzcC5kYXRhLnBhZ2VTaXplOwogICAgICAgIF90aGlzLnF1ZXJ5SW5mby5wYWdlTnVtID0gcmVzcC5kYXRhLnBhZ2VOdW07CiAgICAgIH0pCiAgICB9LAogICAgaGFuZGxlU2l6ZUNoYW5nZShuZXdTaXplKSB7CiAgICAgIHRoaXMucXVlcnlJbmZvLnBhZ2VTaXplID0gbmV3U2l6ZQogICAgICB0aGlzLmdldEJpbGxMaXN0KCkKICAgICAgY29uc29sZS5sb2cobmV3U2l6ZSkKICAgIH0sCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKG5ld1BhZ2UpIHsKICAgICAgdGhpcy5xdWVyeUluZm8ucGFnZU51bSA9IG5ld1BhZ2UKICAgICAgdGhpcy5nZXRCaWxsTGlzdCgpCiAgICAgIGNvbnNvbGUubG9nKG5ld1BhZ2UpCiAgICB9LAogICAgLy8g55uR5ZCs5aSa6YCJ5qGG5Y+Y5YyWCiAgICBoYW5kbGVTZWxlY3Rpb25DaGFuZ2UodmFsKXsKICAgICAgdGhpcy5tdWx0aXBsZVNlbGVjdGlvbiA9IHZhbAogICAgfSwKICAgIC8vIOaYvuekuuS/ruaUueWvueivneahhu+8jOWbnuaYvuaVsOaNrgogICAgYXN5bmMgc2hvd0VkaXREaWFsb2coaWQpIHsKICAgICAgbGV0IGlzQWJsZUVkaXQgPSB0cnVlCiAgICAgIGF3YWl0IGF4aW9zLmdldCgnc3lzQmlsbC8nICsgaWQgKS50aGVuKHJlc3AgPT4gewogICAgICAgIGNvbnNvbGUubG9nKHJlc3ApCiAgICAgICAgdGhpcy5lZGl0Rm9ybSA9IHJlc3AuZGF0YS5kYXRhCiAgICAgICAgdGhpcy5lZGl0Rm9ybS5zeXNVc2VyID0gcmVzcC5kYXRhLmRhdGEuc3lzVXNlcgogICAgICAgIGNvbnNvbGUubG9nKCd0aGlzLmVkaXRGb3JtJykKICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmVkaXRGb3JtKQoKICAgICAgICBpZiAodGhpcy5lZGl0Rm9ybS5wYXlTdGF0ZSA9PT0gdHJ1ZSB8fCB0aGlzLmVkaXRGb3JtLmNhbmNlbFN0YXRlID09PSB0cnVlKSB7CiAgICAgICAgICBpc0FibGVFZGl0ID0gZmFsc2UKICAgICAgICAgIHRoaXMuJGFsZXJ0KCfmirHmrYnvvIHorqLljZXlt7LlrozmiJDmiJblt7Llj5bmtojvvIzkuI3og73kv67mlLnjgIInLCAn5L+u5pS56K+35rGC5byC5bi46YCa55+lJywgewogICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+aIkeefpemBk+S6hicsCiAgICAgICAgICAgIGNhbGxiYWNrOiBhY3Rpb24gPT4gewogICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvYmlsbCcpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICB9KQogICAgICBpZiAoaXNBYmxlRWRpdCkgewogICAgICAgIHRoaXMuZWRpdEZvcm0ucGF5U3RhdGUgPSAwCiAgICAgICAgdGhpcy5lZGl0Rm9ybS5jYW5jZWxTdGF0ZSA9IDAKICAgICAgICB0aGlzLmVkaXREaWFsb2dWaXNpYmxlID0gdHJ1ZQogICAgICB9CiAgICB9LAogICAgLy8g55uR5ZCs5L+u5pS55a+56K+d5qGG55qE5YWz6Zet5LqL5Lu2CiAgICBlZGl0RGlhbG9nQ2xvc2VkKCl7CiAgICAgIHRoaXMuJHJlZnMuZWRpdEZvcm1SZWYucmVzZXRGaWVsZHMoKQogICAgfSwKICAgIC8vIOS/ruaUueW9seWOheWIhuexu+S/oeaBr+W5tuaPkOS6pAogICAgYXN5bmMgZWRpdEJpbGxJbmZvKCkgewogICAgICBjb25zdCBfdGhpcyA9IHRoaXMKICAgICAgaWYgKF90aGlzLmVkaXRGb3JtLmNhbmNlbFN0YXRlICYmIF90aGlzLmVkaXRGb3JtLnBheVN0YXRlKSB7CiAgICAgICAgdGhpcy4kYWxlcnQoJ+aKseatie+8jOS/ruaUueWksei0pe+8geWPlua2iOeKtuaAgeWSjOaUr+S7mOeKtuaAgeS4jeiDveWQjOaXtuS4uuecn+OAgicsICfkv67mlLnorqLljZXkv6Hmga/lvILluLgnLCB7CiAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+aIkeefpemBk+S6hicsCiAgICAgICAgICBjYWxsYmFjazogYWN0aW9uID0+IHsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9iaWxsJykKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIHRoaXMuZWRpdERpYWxvZ1Zpc2libGUgPSBmYWxzZQogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIGlmIChfdGhpcy5lZGl0Rm9ybS5wYXlTdGF0ZSkgewogICAgICAgIGNvbnN0IHsgZGF0YTogcmVzfSA9IGF3YWl0IGF4aW9zLnB1dCgnc3lzQmlsbCcsIEpTT04uc3RyaW5naWZ5KF90aGlzLmVkaXRGb3JtKSkKICAgICAgICBpZihyZXMuY29kZSAhPT0gMjAwKSByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcign5pSv5LuY5aSx6LSlJykKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+aUr+S7mOiuouWNleaIkOWKnycpCiAgICAgICAgdGhpcy5lZGl0RGlhbG9nVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgdGhpcy5nZXRCaWxsTGlzdCgpCiAgICAgICAgcmV0dXJuCiAgICAgIH0gZWxzZSBpZiAoX3RoaXMuZWRpdEZvcm0uY2FuY2VsU3RhdGUpIHsKICAgICAgICBfdGhpcy5lZGl0Rm9ybS5jYW5jZWxTdGF0ZSA9IHRydWUKICAgICAgICBfdGhpcy5lZGl0Rm9ybS5jYW5jZWxUaW1lID0gbW9tZW50KG5ldyBEYXRlKCkpLmZvcm1hdCgnWVlZWS1NTS1ERCBISDptbTpzcycpCiAgICAgICAgLy8g6I635Y+W5Zy65qyh5bqn5L2N5L+h5oGvCiAgICAgICAgY29uc3QgeyBkYXRhIDogY3VyU2Vzc2lvbiB9ID0gYXdhaXQgYXhpb3MuZ2V0KCdzeXNTZXNzaW9uL2ZpbmQvJyArIF90aGlzLmVkaXRGb3JtLnNlc3Npb25JZCkKICAgICAgICBsZXQgc2Vzc2lvblNlYXRzID0gSlNPTi5wYXJzZShjdXJTZXNzaW9uLmRhdGEuc2Vzc2lvblNlYXRzKQogICAgICAgIC8vIOino+aekOWHuuiuouWNlemAieaLqeeahOW6p+S9je+8jOabtOaWsOW6p+S9jeS/oeaBrwogICAgICAgIGZvcihsZXQgc2VhdCBvZiBKU09OLnBhcnNlKF90aGlzLmVkaXRGb3JtLnNlc3RzKSl7CiAgICAgICAgICBsZXQgcm93ID0gc2VhdC5zdWJzdHJpbmcoMCwgc2VhdC5pbmRleE9mKCfmjpInKSkKICAgICAgICAgIGxldCBjb2wgPSBOdW1iZXIucGFyc2VJbnQoc2VhdC5zdWJzdHJpbmcoc2VhdC5pbmRleE9mKCfmjpInKSArIDEsIHNlYXQubGVuZ3RoIC0gMSkpCiAgICAgICAgICBzZXNzaW9uU2VhdHNbcm93XVtjb2wgLSAxXSA9IDAKICAgICAgICB9CiAgICAgICAgLy8g5pu05paw6K6i5Y2V5L+h5oGv5ZKM5Zy65qyh5bqn5L2N5L+h5oGvCiAgICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5wdXRbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgY29uc3QgeyBkYXRhOiByZXNwIH0gPSBhd2FpdCBheGlvcy5wdXQoJ3N5c0JpbGwvY2FuY2VsJyxKU09OLnN0cmluZ2lmeSh7c3lzQmlsbDogX3RoaXMuZWRpdEZvcm0sIHNlc3Npb25TZWF0czogSlNPTi5zdHJpbmdpZnkoc2Vzc2lvblNlYXRzKX0pKQogICAgICAgIGlmKHJlc3AuY29kZSAhPT0gMjAwKSByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcign5Y+W5raI5aSx6LSlJykKICAgICAgICB0aGlzLmdldEJpbGxMaXN0KCkKICAgICAgICB0aGlzLmVkaXREaWFsb2dWaXNpYmxlID0gZmFsc2UKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WPlua2iOiuouWNleaIkOWKnycpCiAgICAgIH0KICAgIH0sCgogICAgYXN5bmMgbXVsdGlwbGVEZWxldGUoKXsKICAgICAgY29uc3QgX3RoaXMgPSB0aGlzCiAgICAgIC8v6K+i6Zeu55So5oi35piv5ZCm56Gu6K6k5Yig6ZmkCiAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCB0aGlzLiRjb25maXJtKCfmraTmk43kvZzlsIbmsLjkuYXliKDpmaTov5nkupvmnaHnm64sIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkuY2F0Y2goZXJyID0+IGVycikKCiAgICAgIC8vIOeUqOaIt+ehruiupOWIoOmZpCwgcmVzcOS4uuWtl+espuS4siJjb25maXJtIgogICAgICAvLyDnlKjmiLflj5bmtojliKDpmaTvvIxyZXNw5Li65a2X56ym5LiyImNhbmNlbCIKICAgICAgaWYgKHJlc3AgPT09ICdjYW5jZWwnKXsKICAgICAgICByZXR1cm4gX3RoaXMuJG1lc3NhZ2UuaW5mbygn5bey5Y+W5raI5Yig6ZmkJykKICAgICAgfQoKICAgICAgbGV0IGlkcyA9IFtdCiAgICAgIHRoaXMubXVsdGlwbGVTZWxlY3Rpb24uZm9yRWFjaChkYXRhID0+IHsKICAgICAgICBpZHMucHVzaChkYXRhLmJpbGxJZCkKICAgICAgfSkKICAgICAgYXdhaXQgYXhpb3MuZGVsZXRlKCdzeXNCaWxsLycgKyBpZHMpLnRoZW4ocmVzcCA9PiB7CiAgICAgICAgaWYgKHJlc3AuZGF0YS5jb2RlICE9PSAyMDApewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmibnph4/liKDpmaTlpLHotKXvvIEnKQogICAgICAgIH0KICAgICAgfSkKICAgICAgdGhpcy5nZXRCaWxsTGlzdCgpCiAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5om56YeP5Yig6Zmk5oiQ5Yqf77yBJykKICAgIH0sCiAgICAvL+agueaNrmlk5Yig6Zmk5a+55bqU55qE5b2x5Y6F5YiG57G7CiAgICBhc3luYyBkZWxldGVCaWxsQnlJZChpZCl7CiAgICAgIGNvbnN0IF90aGlzID0gdGhpcwogICAgICAvL+ivoumXrueUqOaIt+aYr+WQpuehruiupOWIoOmZpAogICAgICBjb25zdCByZXNwID0gYXdhaXQgdGhpcy4kY29uZmlybSgn5q2k5pON5L2c5bCG5rC45LmF5Yig6Zmk6K+l5p2h55uuLCDmmK/lkKbnu6fnu60/JywgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLmNhdGNoKGVyciA9PiBlcnIpCgogICAgICAvLyDnlKjmiLfnoa7orqTliKDpmaQsIHJlc3DkuLrlrZfnrKbkuLIiY29uZmlybSIKICAgICAgLy8g55So5oi35Y+W5raI5Yig6Zmk77yMcmVzcOS4uuWtl+espuS4siJjYW5jZWwiCiAgICAgIGNvbnNvbGUubG9nKHJlc3ApCiAgICAgIGlmIChyZXNwID09PSAnY2FuY2VsJyl7CiAgICAgICAgcmV0dXJuIF90aGlzLiRtZXNzYWdlLmluZm8oJ+W3suWPlua2iOWIoOmZpCcpCiAgICAgIH0KCiAgICAgIGF3YWl0IGF4aW9zLmRlbGV0ZSgnc3lzQmlsbC8nICsgaWQpLnRoZW4ocmVzcCA9PiB7CiAgICAgICAgaWYgKHJlc3AuZGF0YS5jb2RlICE9PSAyMDApewogICAgICAgICAgX3RoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5Yig6Zmk6K6i5Y2V5aSx6LSl77yBJykKICAgICAgICB9CiAgICAgIH0pCiAgICAgIHRoaXMuZ2V0QmlsbExpc3QoKQogICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WIoOmZpOiuouWNleaIkOWKn++8gScpCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["BillInfo.vue"],"names":[],"mappings":";AA6JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BillInfo.vue","sourceRoot":"src/views/bill","sourcesContent":["<template>\n  <div>\n    <!--面包屑导航区域-->\n    <div class=\"board\">\n      <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n        <el-breadcrumb-item :to=\"{ path: '/welcome' }\">首页</el-breadcrumb-item>\n        <el-breadcrumb-item>订单管理</el-breadcrumb-item>\n        <el-breadcrumb-item>订单信息管理</el-breadcrumb-item>\n      </el-breadcrumb>\n    </div>\n\n    <!--卡片视图-->\n    <el-card class=\"box-card\">\n      <el-row :gutter=\"24\">\n        <el-col :span=\"6\">\n          <el-input v-model=\"inputUserName\" placeholder=\"请输入用户名\" clearable></el-input>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-select v-model=\"selectedState\" placeholder=\"请选择订单状态\" clearable>\n            <el-option v-for=\"item in payStates\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\"></el-option>\n          </el-select>\n        </el-col>\n\n        <el-col :span=\"12\">\n          <el-date-picker\n              v-model=\"selectedDate\"\n              type=\"date\"\n              value-format=\"yyyy-MM-dd\"\n              placeholder=\"选择日期时间\">\n          </el-date-picker>\n        </el-col>\n      </el-row>\n      <br>\n      <el-row>\n        <el-col :span=\"24\">\n          <el-button style=\"font-size: 22px;\" @click=\"getBillList\">\n            <i class=\"iconfont icon-r-find\" style=\"font-size: 24px;\"></i> 搜索\n          </el-button>\n          <el-button type=\"danger\" style=\"font-size: 22px;\" @click=\"multipleDelete\">\n            <i class=\"iconfont icon-r-delete\" style=\"font-size: 24px;\"></i> 批量删除\n          </el-button>\n        </el-col>\n      </el-row>\n\n      <!--订单列表-->\n      <el-table :data=\"billList\" style=\"width: 100%\" border stripe @selection-change=\"handleSelectionChange\">\n        <el-table-column type=\"selection\" width=\"55\"></el-table-column>\n        <el-table-column prop=\"billId\" label=\"#\" width=\"40\"></el-table-column>\n        <el-table-column prop=\"sysUser.userName\" label=\"用户名\" width=\"80px\"></el-table-column>\n        <el-table-column prop=\"sysSession.sysMovie.movieName\" label=\"电影名称\"></el-table-column>\n        <el-table-column prop=\"sysSession.sysHall.hallName\" label=\"影厅名称\"></el-table-column>\n        <el-table-column prop=\"sysSession.sessionDate\" label=\"场次日期\"></el-table-column>\n        <el-table-column prop=\"sysSession.playTime, sysSession.endTime\" label=\"播放时间\">\n          <template slot-scope=\"scope\"> {{scope.row.sysSession.playTime}}-{{scope.row.sysSession.endTime}} </template>\n        </el-table-column>\n        <el-table-column prop=\"seats\" label=\"座位\"></el-table-column>\n        <el-table-column prop=\"createTime\" label=\"订票时间\"></el-table-column>\n        <el-table-column prop=\"payState\" label=\"订单状态\" width=\"80\">\n          <template slot-scope=\"scope\">\n            <span v-if=\"scope.row.payState === true\" style=\"color: #13ce66\">已完成</span>\n            <span v-if=\"scope.row.payState !== true && scope.row.cancelState !== true \" style=\"color: #145ddc\">未支付</span>\n            <span v-if=\"scope.row.cancelState === true && scope.row.cancelTime ===null\" style=\"color: #e6a23c\">超时取消</span>\n            <span v-if=\"scope.row.cancelState === true && scope.row.cancelTime !==null\" style=\"color: crimson\">用户取消</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" width=\"200\" fixed=\"right\">\n          <template slot-scope=\"scope\">\n            <el-tooltip effect=\"dark\" content=\"修改订单信息\" placement=\"top\" :enterable=\"false\" :open-delay=\"500\">\n              <el-button type=\"primary\" @click=\"showEditDialog(scope.row.billId)\">\n                <i class=\"iconfont icon-r-edit\" style=\"font-size: 22px;\"></i>\n              </el-button>\n            </el-tooltip>\n            <el-tooltip effect=\"dark\" content=\"删除订单\" placement=\"top\" :enterable=\"false\" :open-delay=\"500\">\n              <el-button type=\"danger\" @click=\"deleteBillById(scope.row.billId)\">\n                <i class=\"iconfont icon-r-delete\" style=\"font-size: 24px;\"></i>\n              </el-button>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <!--分页区域-->\n      <el-pagination\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n          :current-page=\"queryInfo.pageNum\"\n          :page-sizes=\"[5, 7, 9]\"\n          :page-size=\"queryInfo.pageSize\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"total\">\n      </el-pagination>\n    </el-card>\n\n\n\n    <!--修改影厅对话框-->\n    <el-dialog title=\"修改订单\" :visible.sync=\"editDialogVisible\" width=\"60%\" @close=\"editDialogClosed\">\n      <el-form :model=\"editForm\" ref=\"editFormRef\" label-width=\"100px\">\n        <!--prop：在addFormRules中定义校验规则， v-model：双向绑定数据-->\n        <el-form-item label=\"订单编号\" prop=\"billId\">\n          <el-input v-model=\"editForm.billId\" disabled></el-input>\n        </el-form-item>\n        <el-form-item label=\"用户名\" prop=\"sysUser.userName\">\n          <el-input v-model=\"editForm.sysUser.userName\" disabled></el-input>\n        </el-form-item>\n        <el-form-item label=\"电影名称\" prop=\"sysSession.sysMovie.movieName\">\n          <el-input v-model=\"editForm.sysSession.sysMovie.movieName\" disabled></el-input>\n        </el-form-item>\n        <el-form-item label=\"影厅名称\" prop=\"sysSession.sysHall.hallName\">\n          <el-input v-model=\"editForm.sysSession.sysHall.hallName\" disabled></el-input>\n        </el-form-item>\n        <el-form-item label=\"座位\" prop=\"sysSession.sysHall.hallName\">\n          <el-input v-model=\"editForm.seats\" disabled></el-input>\n        </el-form-item>\n        <el-form-item label=\"场次日期\" prop=\"sysSession.sessionDate\">\n          <el-input v-model=\"editForm.sysSession.sessionDate\" disabled></el-input>\n        </el-form-item>\n        <el-form-item label=\"播放时间\" prop=\"sysSession.sessionDate\">\n          <el-input v-model=\"editForm.sysSession.playTime\" disabled></el-input>\n        </el-form-item>\n        <el-form-item label=\"散场时间\" prop=\"sysSession.sessionDate\">\n          <el-input v-model=\"editForm.sysSession.endTime\" disabled></el-input>\n        </el-form-item>\n        <el-form-item label=\"订单时间\" prop=\"sysSession.sessionDate\">\n          <el-input v-model=\"editForm.createTime\" disabled></el-input>\n        </el-form-item>\n        <el-form-item label=\"支付状态\" prop=\"payState\" v-if=\"!editForm.cancelState\">\n          <el-select v-model=\"editForm.payState\" placeholder=\"请选择支付状态\" clearable >\n            <el-option\n              v-for=\"item in payStates\"\n              :key=\"item.id\"\n              :label=\"item.name\"\n              :value=\"item.id\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"取消状态\" prop=\"cancelState\" v-if=\"!editForm.payState\">\n          <el-select v-model=\"editForm.cancelState\" placeholder=\"请选择取消状态\" clearable >\n            <el-option\n              v-for=\"item in cancelStates\"\n              :key=\"item.id\"\n              :label=\"item.name\"\n              :value=\"item.id\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"editDialogVisible = false\" style=\"font-size: 18px;\"><i class=\"iconfont icon-r-left\" style=\"font-size: 24px;\"></i> 取 消</el-button>\n        <el-button type=\"primary\" @click=\"editBillInfo\" style=\"font-size: 18px;\"><i class=\"iconfont icon-r-yes\" style=\"font-size: 22px;\"></i> 确 定</el-button>\n      </span>\n    </el-dialog>\n\n  </div>\n</template>\n\n<script>\nimport global from \"@/assets/css/global.css\"\nimport moment from 'moment'\nexport default {\n  name: \"billInfo\",\n  data() {\n    return {\n      queryInfo: {\n        queryByUserName: '',\n        payState: '',\n        createTime: '',\n        pageNum: 1,\n        pageSize: 7\n      },\n      billList: [],\n      total: 0,\n      multipleSelection: [],\n      inputUserName: '',\n      selectedState: '',\n      selectedDate: '',\n      editDialogVisible: false,\n      editForm: {\n        sysUser: {\n          userName: ''\n        },\n        sysSession: {\n          sysMovie: {},\n          sysHall: {}\n        }\n      },\n      payStates: [\n        {\n          id: 0,\n          name: '未支付'\n        },\n        {\n          id: 1,\n          name: '已完成'\n        }\n      ],\n      cancelStates: [\n        {\n          id: 0,\n          name: '未取消'\n        },\n        {\n          id: 1,\n          name: '已取消'\n        }\n      ],\n    }\n  },\n  created() {\n    this.getBillList()\n  },\n  methods: {\n    async getBillList() {\n      // this.userName = this.inputUserName\n      this.queryInfo.payState = this.selectedState\n      this.queryInfo.createTime = this.selectedDate\n      console.log('quaryInfo'+this.inputUserName)\n      this.queryInfo.queryByUserName = this.inputUserName\n      console.log('sysUser.userName')\n      console.log(this.queryInfo.queryByUserName)\n      const _this = this;\n      await axios.get('sysBill', {params: _this.queryInfo}).then(resp => {\n        console.log(resp)\n        _this.billList = resp.data.data;\n        _this.total = resp.data.total;\n        _this.queryInfo.pageSize = resp.data.pageSize;\n        _this.queryInfo.pageNum = resp.data.pageNum;\n      })\n    },\n    handleSizeChange(newSize) {\n      this.queryInfo.pageSize = newSize\n      this.getBillList()\n      console.log(newSize)\n    },\n    handleCurrentChange(newPage) {\n      this.queryInfo.pageNum = newPage\n      this.getBillList()\n      console.log(newPage)\n    },\n    // 监听多选框变化\n    handleSelectionChange(val){\n      this.multipleSelection = val\n    },\n    // 显示修改对话框，回显数据\n    async showEditDialog(id) {\n      let isAbleEdit = true\n      await axios.get('sysBill/' + id ).then(resp => {\n        console.log(resp)\n        this.editForm = resp.data.data\n        this.editForm.sysUser = resp.data.data.sysUser\n        console.log('this.editForm')\n        console.log(this.editForm)\n\n        if (this.editForm.payState === true || this.editForm.cancelState === true) {\n          isAbleEdit = false\n          this.$alert('抱歉！订单已完成或已取消，不能修改。', '修改请求异常通知', {\n            confirmButtonText: '我知道了',\n            callback: action => {\n              this.$router.push('/bill')\n            }\n          })\n        }\n      })\n      if (isAbleEdit) {\n        this.editForm.payState = 0\n        this.editForm.cancelState = 0\n        this.editDialogVisible = true\n      }\n    },\n    // 监听修改对话框的关闭事件\n    editDialogClosed(){\n      this.$refs.editFormRef.resetFields()\n    },\n    // 修改影厅分类信息并提交\n    async editBillInfo() {\n      const _this = this\n      if (_this.editForm.cancelState && _this.editForm.payState) {\n        this.$alert('抱歉，修改失败！取消状态和支付状态不能同时为真。', '修改订单信息异常', {\n          confirmButtonText: '我知道了',\n          callback: action => {\n            this.$router.push('/bill')\n          }\n        })\n        this.editDialogVisible = false\n        return\n      }\n      if (_this.editForm.payState) {\n        const { data: res} = await axios.put('sysBill', JSON.stringify(_this.editForm))\n        if(res.code !== 200) return this.$message.error('支付失败')\n        this.$message.success('支付订单成功')\n        this.editDialogVisible = false\n        this.getBillList()\n        return\n      } else if (_this.editForm.cancelState) {\n        _this.editForm.cancelState = true\n        _this.editForm.cancelTime = moment(new Date()).format('YYYY-MM-DD HH:mm:ss')\n        // 获取场次座位信息\n        const { data : curSession } = await axios.get('sysSession/find/' + _this.editForm.sessionId)\n        let sessionSeats = JSON.parse(curSession.data.sessionSeats)\n        // 解析出订单选择的座位，更新座位信息\n        for(let seat of JSON.parse(_this.editForm.sests)){\n          let row = seat.substring(0, seat.indexOf('排'))\n          let col = Number.parseInt(seat.substring(seat.indexOf('排') + 1, seat.length - 1))\n          sessionSeats[row][col - 1] = 0\n        }\n        // 更新订单信息和场次座位信息\n        axios.defaults.headers.put['Content-Type'] = 'application/json'\n        const { data: resp } = await axios.put('sysBill/cancel',JSON.stringify({sysBill: _this.editForm, sessionSeats: JSON.stringify(sessionSeats)}))\n        if(resp.code !== 200) return this.$message.error('取消失败')\n        this.getBillList()\n        this.editDialogVisible = false\n        this.$message.success('取消订单成功')\n      }\n    },\n\n    async multipleDelete(){\n      const _this = this\n      //询问用户是否确认删除\n      const resp = await this.$confirm('此操作将永久删除这些条目, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).catch(err => err)\n\n      // 用户确认删除, resp为字符串\"confirm\"\n      // 用户取消删除，resp为字符串\"cancel\"\n      if (resp === 'cancel'){\n        return _this.$message.info('已取消删除')\n      }\n\n      let ids = []\n      this.multipleSelection.forEach(data => {\n        ids.push(data.billId)\n      })\n      await axios.delete('sysBill/' + ids).then(resp => {\n        if (resp.data.code !== 200){\n          this.$message.success('批量删除失败！')\n        }\n      })\n      this.getBillList()\n      this.$message.success('批量删除成功！')\n    },\n    //根据id删除对应的影厅分类\n    async deleteBillById(id){\n      const _this = this\n      //询问用户是否确认删除\n      const resp = await this.$confirm('此操作将永久删除该条目, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).catch(err => err)\n\n      // 用户确认删除, resp为字符串\"confirm\"\n      // 用户取消删除，resp为字符串\"cancel\"\n      console.log(resp)\n      if (resp === 'cancel'){\n        return _this.$message.info('已取消删除')\n      }\n\n      await axios.delete('sysBill/' + id).then(resp => {\n        if (resp.data.code !== 200){\n          _this.$message.success('删除订单失败！')\n        }\n      })\n      this.getBillList()\n      this.$message.success('删除订单成功！')\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}